import{k as re,i as ne,m as j,c as oe,h as ie,l as me,g as pe,q as ce,a0 as fe,d as B,_ as I,G as a,P as f,H as S,Q as h,M as v,j as t,K as l,av as K,bi as ee,bj as Se,aI as _,R as i,F as H,ad as W,O as m,J as U,L as b,bf as V,aa as N,aw as ae,N as z,ac as x}from"./index.ce7ea90d.js";import{l as be}from"./login-form.bb4c7146.js";import{w as ve}from"./working-component.b009b899.js";import{s as G,a as M,c as Y,m as se,Q as w,d as p,i as J,h as ye}from"./auth.fdd9f60a.js";import{a as T}from"./QSelect.6c45d970.js";import{Q as F}from"./QSpace.28cd6bbf.js";import{Q as g}from"./QItemLabel.c0d04a15.js";import{Q as he}from"./QList.8b3bec6d.js";import{Q as le,a as te}from"./QTable.0202606a.js";import{e as ke,l as ge}from"./exam-answers.a01bce11.js";import{u as O}from"./vue-i18n.9cee7702.js";import{S as $e,C as Ce,E as we,t as Ve,a as qe,b as Fe}from"./student-course-tab-view.d81f24f0.js";import{f as ue}from"./fees-printable.7b2d577e.js";import{Q as de}from"./QForm.5ac6f279.js";import{Q as X}from"./QTr.64def1a2.js";import{Q as Z}from"./QTd.4bd4834f.js";import"./QResizeObserver.c34b740c.js";import"./QCircularProgress.f0d12216.js";import"./axios.1ff92d29.js";import"./index.8e8f3c06.js";import"./_commonjsHelpers.4e997714.js";import"./QField.ebc53bc9.js";import"./selection.0b8105e5.js";import"./exam-question.99932840.js";import"./QTabPanels.d46b6fff.js";import"./touch.3df10340.js";import"./use-render-cache.1a7235d4.js";import"./QImg.2b26ec98.js";var Ae=re({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:s}){const{proxy:{$q:c}}=pe(),y=ne(ce,j);if(y===j)return console.error("QPage needs to be a deep child of QLayout"),j;if(ne(fe,j)===j)return console.error("QPage needs to be child of QPageContainer"),j;const o=oe(()=>{const u=(y.header.space===!0?y.header.size:0)+(y.footer.space===!0?y.footer.size:0);if(typeof e.styleFn=="function"){const d=y.isContainer.value===!0?y.containerHeight.value:c.screen.height;return e.styleFn(u,d)}return{minHeight:y.isContainer.value===!0?y.containerHeight.value-u+"px":c.screen.height===0?u!==0?`calc(100vh - ${u}px)`:"100vh":c.screen.height-u+"px"}}),n=oe(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>ie("main",{class:n.value,style:o.value},me(s.default))}});const Ue=B({name:"remove-deviceid",methods:{clickedRemove(){this.confirmRemDevID=!1,this.studentsS.removeDeviceIdAction(this.studentsS.student)}},data(){return{studentsS:G(),confirmRemDevID:!1}},setup(){return{auth:M()}}}),Ne=i("p",null,"Are you sure you want to delete student's device ID ?",-1);function Ee(e,s,c,y,$,o){var n,u,d,C,E,A;return a(),f("div",null,[((d=(u=(n=e.studentsS.student)==null?void 0:n.user)==null?void 0:u.profile)==null?void 0:d.deviceId)!=null&&((A=(E=(C=e.studentsS.student)==null?void 0:C.user)==null?void 0:E.profile)==null?void 0:A.deviceId.length)>0&&e.auth.isSuperAssistant?(a(),S(h,{key:0,class:"q-pa-md full-width",label:"remove device Id",color:"negative",onClick:s[0]||(s[0]=k=>e.confirmRemDevID=!0)})):v("",!0),t(_,{modelValue:e.confirmRemDevID,"onUpdate:modelValue":s[3]||(s[3]=k=>e.confirmRemDevID=k)},{default:l(()=>[t(K,null,{default:l(()=>[t(ee,null,{default:l(()=>[Ne]),_:1}),t(Se,{align:"right"},{default:l(()=>[t(h,{color:"negative",label:"Remove",onClick:s[1]||(s[1]=k=>e.clickedRemove())}),t(h,{color:"primary",label:"cancel",onClick:s[2]||(s[2]=k=>e.confirmRemDevID=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var De=I(Ue,[["render",Ee]]);const Qe=B({setup(){const e=ke(),s=G(),c=Y();return{examAnswersS:e,studentsS:s,attendanceS:c}},async mounted(){console.log("student course exam answers component is loaded"),this.attendanceS.selectedCourse!=null&&this.studentsS.student!=null&&(await this.examAnswersS.query(this.studentsS.student,this.attendanceS.selectedCourse),this.$forceUpdate())}}),Pe={key:0},Be={key:1},Ie=i("br",null,null,-1),Le=i("b",null,"Exam answers",-1),Te=i("br",null,null,-1),Re={class:"col"},Ke={class:"col"},Ge={class:"col"},Me={class:"col"},Oe={class:"col"},He={class:"col"},Ye={class:"col"},je=i("br",null,null,-1),ze=i("b",null,"missing exam answers",-1),We=i("br",null,null,-1),Je={class:"col"};function Xe(e,s,c,y,$,o){return a(),f("div",null,[e.examAnswersS.working?(a(),f("div",Pe,"working...")):(a(),f("div",Be,[t(K,{flat:"",bordered:"",class:"q-mx-md q-pa-md"},{default:l(()=>[Ie,Le,Te,(a(!0),f(H,null,W(e.examAnswersS.examAnswers,(n,u)=>{var d,C,E;return a(),f("div",{key:u,class:"row"},[i("div",Re,m((C=(d=n.exam)==null?void 0:d.lesson)==null?void 0:C.title),1),i("div",Ke,m((E=n.exam)==null?void 0:E.name),1),i("div",Ge,"score:"+m(n.score),1),i("div",Me,"percent:"+m(n.percent)+"%",1),i("div",Oe,m(n.pass_percent)+"%",1),i("div",He,m(n.redo_idx),1),i("div",Ye,m(n.status),1)])}),128)),je,ze,We,(a(!0),f(H,null,W(e.examAnswersS.lessonsWithMissingExamAnswers,(n,u)=>(a(),f("div",{key:u,class:"row"},[i("div",Je,m(n.title),1)]))),128))]),_:1})]))])}var Ze=I(Qe,[["render",Xe]]);const _e=B({name:"subscribeForm",data(){const e=Y(),s=G(),c=se(),{locale:y,t:$}=O({useScope:"global"});return{homeworkAnswersS:c,locale:y,t:$,attendanceS:e,studentsS:s,options:["","\u062A\u062E\u0641\u064A\u0636","\u0628\u0627\u0643\u062F\u062C","\u062A\u064A\u0645","\u0645\u062C\u0627\u0646\u064A","\u0627\u0648\u0646\u0644\u0627\u064A\u0646","\u0641\u0648\u062F\u0627\u0641\u0648\u0646 \u0643\u0627\u0634","\u0638\u0631\u0648\u0641 \u062E\u0627\u0635\u0629"]}},mounted(){var e,s,c;this.studentsS.fees=(s=(e=this.attendanceS.selectedCourse)==null?void 0:e.center_subscription_cost)!=null?s:0,this.studentsS.group=(c=this.attendanceS.selectedGroup)!=null?c:"",this.studentsS.notes="",this.studentsS.notesDescription="",this.studentsS.barcode=this.studentsS.barcode,this.studentsS.selectLessons()}}),xe={class:"row full-width q-my-md"},et=i("br",null,null,-1),tt={key:2},st={class:"row full-width q-my-md"};function lt(e,s,c,y,$,o){const n=U("q-spac");return a(),S(_,null,{default:l(()=>[t(K,{style:{width:"500px"},dir:e.locale=="en-US"?"ltr":"rtl"},{default:l(()=>{var u,d,C,E,A;return[t(w,{class:"bg-primary"},{default:l(()=>[t(p,null,{default:l(()=>[t(g,{class:"text-center text-h6 text-white"},{default:l(()=>[b(m(e.t("Subscribe Student to course")),1)]),_:1})]),_:1})]),_:1}),t(V),t(w,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Name"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>{var k,D,L,R;return[b(m((R=(L=(D=(k=e.studentsS.student)==null?void 0:k.user)==null?void 0:D.profile)==null?void 0:L.name)!=null?R:""),1)]}),_:1})]),_:1})]),_:1}),t(V,{inset:""}),t(w,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Phone Number"))+" : ",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>{var k,D,L,R;return[b(m((R=(L=(D=(k=e.studentsS.student)==null?void 0:k.user)==null?void 0:D.profile)==null?void 0:L.phoneNumber)!=null?R:""),1)]}),_:1})]),_:1})]),_:1}),((u=e.studentsS.student)==null?void 0:u.barcode)==null?(a(),S(V,{key:0,inset:""})):v("",!0),((d=e.studentsS.student)==null?void 0:d.barcode)==null?(a(),S(w,{key:1},{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Barcode"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{modelValue:e.studentsS.barcode,"onUpdate:modelValue":s[0]||(s[0]=k=>e.studentsS.barcode=k),type:"number",outlined:"",dense:"",class:"full-width"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):v("",!0),i("div",xe,[t(n),((C=e.studentsS.student)==null?void 0:C.barcode)==null&&e.studentsS.barcode!=null&&e.studentsS.barcode!=""?(a(),S(h,{key:0,class:"q-mx-md",style:{width:"200px"},label:"save barcode",color:"primary",onClick:s[1]||(s[1]=k=>e.studentsS.confirmUpdateBarcode())})):v("",!0),t(n)]),t(V,{inset:""}),t(w,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Course"))+" : ",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>{var k,D;return[b(m((D=(k=e.attendanceS.selectedCourse)==null?void 0:k.name)!=null?D:""),1)]}),_:1})]),_:1})]),_:1}),t(V,{inset:""}),t(w,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Group"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>{var k,D;return[t(T,{modelValue:e.studentsS.group,"onUpdate:modelValue":s[2]||(s[2]=L=>e.studentsS.group=L),outlined:"",options:(D=(k=e.attendanceS.selectedCourse)==null?void 0:k.groups)!=null?D:[],dense:"",class:"full-width"},null,8,["modelValue","options"])]}),_:1})]),_:1})]),_:1}),t(V,{inset:""}),t(w,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Fees"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{modelValue:e.studentsS.fees,"onUpdate:modelValue":s[3]||(s[3]=k=>e.studentsS.fees=k),modelModifiers:{number:!0},type:"number",outlined:"",dense:"",class:"full-width"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(V,{inset:""}),t(w,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Notes"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(T,{outlined:"",dense:"",modelValue:e.studentsS.notes,"onUpdate:modelValue":[s[4]||(s[4]=k=>e.studentsS.notes=k),s[5]||(s[5]=k=>e.studentsS.notesDescription=e.studentsS.notes)],options:e.options},null,8,["modelValue","options"]),et,t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{modelValue:e.studentsS.notesDescription,"onUpdate:modelValue":s[6]||(s[6]=k=>e.studentsS.notesDescription=k),placeholder:"Note description",outlined:"",dense:"",class:"full-width"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(V,{inset:""}),((E=e.attendanceS.selectedCourse)==null?void 0:E.offline_homework_mode)==!0?(a(),f("div",tt,[t(T,{class:"q-mx-md",style:{width:"450px"},multiple:"",options:(A=e.attendanceS.selectedCourse)==null?void 0:A.lessonOptions,modelValue:e.homeworkAnswersS.lessons,"onUpdate:modelValue":s[7]||(s[7]=k=>e.homeworkAnswersS.lessons=k),label:"delivered homework lessons",clearable:""},null,8,["options","modelValue"]),t(V,{inset:""})])):v("",!0),i("div",st,[e.studentsS.student!=null&&e.attendanceS.selectedCourse!=null&&e.studentsS.group!=null&&e.studentsS.group.length>0&&e.studentsS.fees>0?(a(),S(h,{key:0,class:"q-mx-md",style:{width:"200px"},label:e.t("subscribe"),onClick:s[8]||(s[8]=k=>e.studentsS.subscribe()),color:"primary"},null,8,["label"])):(a(),S(h,{key:1,disable:"",color:"primary",class:"q-mx-md",style:{width:"200px"},label:e.t("subscribe")},null,8,["label"])),t(F),t(h,{class:"q-mx-md",style:{width:"200px"},onClick:s[9]||(s[9]=k=>e.studentsS.showSubscribeForm=!1),label:e.t("cancel"),color:"negative"},null,8,["label"])])]}),_:1},8,["dir"])]),_:1})}var nt=I(_e,[["render",lt]]);const ot=B({name:"quickCreateFeesTransaction",components:{feesPrintable:ue},methods:{amountKeyUp(e){e.key==="Enter"&&this.feesS.confirmCreateTransaction()}},data(){const{locale:e,t:s}=O({useScope:"global"}),c=M(),y=Y(),$=G(),o=J();return{locale:e,t:s,authS:c,attendanceS:y,feesS:o,studentsS:$}}}),at={key:1},ut={class:"row"};function dt(e,s,c,y,$,o){const n=U("feesPrintable");return e.feesS.transaction!=null&&e.feesS.paid?(a(),S(n,{key:0,modelValue:e.feesS.paid,"onUpdate:modelValue":s[0]||(s[0]=u=>e.feesS.paid=u)},null,8,["modelValue"])):(a(),f("div",at,[t(K,{flat:"",dir:e.locale=="en-US"?"ltr":"rtl"},{default:l(()=>[i("div",ut,[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"100px"}},{default:l(()=>[b(m(e.t("Amount"))+":",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{modelValue:e.feesS.amount,"onUpdate:modelValue":s[1]||(s[1]=u=>e.feesS.amount=u),modelModifiers:{number:!0},onKeyup:e.amountKeyUp,type:"number",outlined:"",dense:""},null,8,["modelValue","onKeyup"])]),_:1})]),_:1}),t(p,null,{default:l(()=>[e.feesS.paid==!1?(a(),S(h,{key:0,onClick:s[2]||(s[2]=u=>e.feesS.confirmCreateTransaction()),label:e.t("save"),color:"primary"},null,8,["label"])):v("",!0)]),_:1}),t(F)])]),_:1},8,["dir"])]))}var rt=I(ot,[["render",dt]]);const it=B({data(){const{locale:e,t:s}=O({useScope:"global"}),c=G();return{locale:e,t:s,studentsS:c}},methods:{handleEnter(e){e.key==="Enter"&&this.studentsS.confirmUpdateBarcode()}},async mounted(){const e=this.$route.params.id;typeof e=="string"&&this.studentsS.getStudentById(parseInt(e))}}),mt={class:"row full-width q-my-md"};function pt(e,s,c,y,$,o){return a(),S(_,{class:"q-ma-md",persistent:""},{default:l(()=>[t(K,{style:{width:"500px"},dir:e.locale=="en-US"?"ltr":"rtl"},{default:l(()=>[t(w,{class:"bg-primary"},{default:l(()=>[t(p,null,{default:l(()=>[t(g,{class:"text-center text-h6 text-white"},{default:l(()=>[b(m(e.t("Barcode")),1)]),_:1})]),_:1})]),_:1}),t(V),e.studentsS.student!=null?(a(),S(de,{key:0,class:"q-ma-md"},{default:l(()=>[t(w,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Barcode"))+":",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{modelValue:e.studentsS.barcode,"onUpdate:modelValue":s[0]||(s[0]=n=>e.studentsS.barcode=n),onKeydown:e.handleEnter,type:"number",outlined:"",dense:"",class:"full-width"},null,8,["modelValue","onKeydown"])]),_:1})]),_:1})]),_:1}),i("div",mt,[t(h,{class:"q-mx-md",style:{width:"200px"},onClick:s[1]||(s[1]=n=>e.$emit("cancel")),label:e.t("cancel"),color:"negative"},null,8,["label"]),t(F),t(h,{class:"q-mx-md",style:{width:"200px"},label:e.t("save"),onClick:s[2]||(s[2]=n=>e.studentsS.confirmUpdateBarcode()),color:"primary"},null,8,["label"])])]),_:1})):v("",!0)]),_:1},8,["dir"])]),_:1})}var ct=I(it,[["render",pt]]);const ft=B({name:"createStudentForm",methods:{handleEnter(e){e.key==="Enter"&&this.studentsS.confirmCreateStudentAndSubscribeToCourse()}},data(){const{locale:e,t:s}=O({useScope:"global"}),c=M(),y=Y(),$=G(),o=J();return{homeworkAnswersS:se(),locale:e,t:s,authS:c,attendanceS:y,feesS:o,studentsS:$,options:["","\u062A\u062E\u0641\u064A\u0636","\u0628\u0627\u0643\u062F\u062C","\u062A\u064A\u0645","\u0645\u062C\u0627\u0646\u064A","\u0627\u0648\u0646\u0644\u0627\u064A\u0646","\u0641\u0648\u062F\u0627\u0641\u0648\u0646 \u0643\u0627\u0634","\u0638\u0631\u0648\u0641 \u062E\u0627\u0635\u0629"]}},mounted(){this.studentsS.country="Egypt",console.log("create student form"),this.studentsS.initCreateStudentForm()}}),St={class:"col-5"},bt={class:"col-7"},vt=i("br",null,null,-1),yt={key:0},ht={class:"row full-width q-my-md"};function kt(e,s,c,y,$,o){return a(),S(_,{ref:"createStudentForm"},{default:l(()=>[t(K,{style:{width:"500px"},dir:e.locale=="en-US"?"ltr":"rtl"},{default:l(()=>[t(w,{class:"bg-primary"},{default:l(()=>[t(p,null,{default:l(()=>[t(g,{class:"text-center text-h6 text-white"},{default:l(()=>[b(m(e.t("New Student")),1)]),_:1})]),_:1})]),_:1}),t(V),t(de,null,{default:l(()=>{var n,u;return[t(w,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Phone Number"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{modelValue:e.studentsS.phoneNumber,"onUpdate:modelValue":s[0]||(s[0]=d=>e.studentsS.phoneNumber=d),placeholder:"phoneNumber"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(w,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("country"))+": ",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"row"},{default:l(()=>[i("div",St,[t(ae,{modelValue:e.studentsS.country,"onUpdate:modelValue":s[1]||(s[1]=d=>e.studentsS.country=d),label:e.t("Egypt"),val:"Egypt"},null,8,["modelValue","label"])]),i("div",bt,[t(ae,{modelValue:e.studentsS.country,"onUpdate:modelValue":s[2]||(s[2]=d=>e.studentsS.country=d),label:e.t("Rest Of The World"),val:"Rest Of The World"},null,8,["modelValue","label"])])]),_:1})]),_:1})]),_:1}),t(w,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Parent Phone Number"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{outlined:"",dense:"",class:"full-width",modelValue:e.studentsS.parentPhoneNumber,"onUpdate:modelValue":s[3]||(s[3]=d=>e.studentsS.parentPhoneNumber=d)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(V,{inset:""}),t(w,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m("password")+" :")]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{modelValue:e.studentsS.password,"onUpdate:modelValue":s[4]||(s[4]=d=>e.studentsS.password=d),outlined:"",dense:"",class:"full-width",onKeyup:e.handleEnter},null,8,["modelValue","onKeyup"])]),_:1})]),_:1})]),_:1}),t(w,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Name"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{modelValue:e.studentsS.name,"onUpdate:modelValue":s[5]||(s[5]=d=>e.studentsS.name=d),outlined:"",dense:"",class:"full-width",onKeyup:e.handleEnter},null,8,["modelValue","onKeyup"])]),_:1})]),_:1})]),_:1}),t(V,{inset:""}),t(w,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Barcode"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{modelValue:e.studentsS.barcode,"onUpdate:modelValue":s[6]||(s[6]=d=>e.studentsS.barcode=d),type:"number",outlined:"",dense:"",class:"full-width",onKeyup:e.handleEnter},null,8,["modelValue","onKeyup"])]),_:1})]),_:1})]),_:1}),t(V,{inset:""}),t(w,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Group"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>{var d,C;return[t(T,{modelValue:e.studentsS.group,"onUpdate:modelValue":s[7]||(s[7]=E=>e.studentsS.group=E),outlined:"",options:(C=(d=e.attendanceS.selectedCourse)==null?void 0:d.groups)!=null?C:[],dense:"",class:"full-width"},null,8,["modelValue","options"])]}),_:1})]),_:1})]),_:1}),t(V,{inset:""}),t(w,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Fees"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{modelValue:e.studentsS.fees,"onUpdate:modelValue":s[8]||(s[8]=d=>e.studentsS.fees=d),modelModifiers:{number:!0},type:"number",outlined:"",onKeyup:e.handleEnter,dense:"",class:"full-width"},null,8,["modelValue","onKeyup"])]),_:1})]),_:1})]),_:1}),t(V,{inset:""}),t(w,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Notes"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(T,{outlined:"",dense:"",modelValue:e.studentsS.notes,"onUpdate:modelValue":s[9]||(s[9]=d=>e.studentsS.notes=d),options:e.options},null,8,["modelValue","options"]),vt,t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{modelValue:e.studentsS.notesDescription,"onUpdate:modelValue":s[10]||(s[10]=d=>e.studentsS.notesDescription=d),outlined:"",dense:"",class:"full-width",placeholder:"Note description"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(V,{inset:""}),((n=e.attendanceS.selectedCourse)==null?void 0:n.offline_homework_mode)==!0?(a(),f("div",yt,[t(T,{class:"q-mx-md",style:{width:"450px"},multiple:"",options:(u=e.attendanceS.selectedCourse)==null?void 0:u.lessonOptions,modelValue:e.homeworkAnswersS.lessons,"onUpdate:modelValue":s[11]||(s[11]=d=>e.homeworkAnswersS.lessons=d),label:"delivered homework lessons",clearable:""},null,8,["options","modelValue"]),t(V,{inset:""})])):v("",!0),i("div",ht,[t(h,{class:"q-mx-md",style:{width:"200px"},onClick:s[12]||(s[12]=d=>e.studentsS.showCreateStudentForm=!1),label:e.t("cancel"),color:"negative"},null,8,["label"]),t(F),e.studentsS.phoneNumber!=null&&e.studentsS.phoneNumber.length>0&&e.attendanceS.selectedCourse!=null&&e.studentsS.name!=null&&e.studentsS.name.length>0&&e.studentsS.group!=null&&e.studentsS.group.length>0&&e.studentsS.fees>=0?(a(),S(h,{key:0,class:"q-mx-md",style:{width:"200px"},label:e.t("create"),onClick:s[13]||(s[13]=d=>e.studentsS.confirmCreateStudentAndSubscribeToCourse()),color:"primary"},null,8,["label"])):(a(),S(h,{key:1,disable:"",color:"primary",class:"q-mx-md",style:{width:"200px"},label:"create"}))])]}),_:1})]),_:1},8,["dir"])]),_:1},512)}var gt=I(ft,[["render",kt]]);const $t=B({name:"studentSelectionForm",components:{removeDeviceidVue:De,studentCourseExamAnswers:Ze,"student-course-tab-view":$e,editStudentBarcode:ct,quickCreateFeesTransaction:rt,createStudentForm:gt,subscribeForm:nt,createFeesTransaction:Ce,EditSubscriptionDialog:we},computed:{student(){return Ve(this.studentsS.student)},course(){return qe(this.attendanceS.selectedCourse)},subscription(){return Fe(this.studentsS.subscription)},showSubscribeFormComputed(){return this.studentsS.showSubscribeForm&&this.attendanceS.selectedCourse!=null&&this.studentsS.student!=null}},watch:{student(e){e==null&&this.studentsS.barcode.length>0&&this.studentsS.clear()}},data(){const{locale:e,t:s}=O({useScope:"global"}),c=M(),y=Y(),$=G(),o=J();return{locale:e,t:s,authS:c,attendanceS:y,feesS:o,studentsS:$,columns:[{label:s("Course"),name:"course",align:"left",sortable:!0,field:n=>{var u;return(u=n==null?void 0:n.course)==null?void 0:u.name}},{label:s("Group"),name:"group",align:"left",sortable:!0,field:n=>n==null?void 0:n.group},{label:s("Status"),name:"status",align:"left",sortable:!0,field:n=>n!=null&&n.active?s("Active"):s("Not Active")},{label:s("Fees"),name:"Fees",align:"left",sortable:!0,field:n=>n==null?void 0:n.fees},{label:s("Remaining Fees"),name:"remaining fees",align:"left",sortable:!0,field:n=>n==null?void 0:n.remaining_fees}]}}}),Ct=i("br",null,null,-1),wt={key:0},Vt={class:"row full-width q-mb-md"},qt={class:"col-10"},Ft={class:"text-weight-medium q-mx-sm"},At={key:0,class:"cursor-pointer q-mx-sm"},Ut={key:1,class:"cursor-pointer q-mx-sm"},Nt={key:2,class:"cursor-pointer q-mx-sm"},Et={class:"col-2"},Dt={class:"row full-width"},Qt=i("br",null,null,-1),Pt={class:"row"},Bt=i("br",null,null,-1),It={class:"full-width q-mt-md"},Lt=i("br",null,null,-1),Tt=i("br",null,null,-1),Rt={class:"row full-width"},Kt=i("br",null,null,-1),Gt={class:"row full-width items-center"},Mt={class:"row full-width"},Ot={key:0},Ht=i("br",null,null,-1),Yt={key:0,class:"row full-width"},jt={key:1},zt={key:2},Wt={key:1},Jt={key:0},Xt={key:1,class:"row full-width"},Zt={class:"col-12 q-my-md q-px-md"},_t=i("br",null,null,-1),xt={class:"col-12 q-my-md q-px-md"},es={key:0,style:{color:"red"},class:"q-ml-lg q-mr-lg"},ts={key:2},ss=i("br",null,null,-1);function ls(e,s,c,y,$,o){var R;const n=U("quickCreateFeesTransaction"),u=U("EditSubscriptionDialog"),d=U("removeDeviceidVue"),C=U("createFeesTransaction"),E=U("subscribeForm"),A=U("createStudentForm"),k=U("editStudentBarcode"),D=U("student-course-tab-view"),L=U("studentCourseExamAnswers");return a(),f("div",null,[Ct,e.studentsS.student!=null?(a(),f("div",wt,[t(he,{bordered:"",class:"rounded-borders q-mx-md"},{default:l(()=>[t(w,null,{default:l(()=>[t(p,{top:""},{default:l(()=>[i("div",Vt,[i("div",qt,[t(g,{lines:"1",class:"q-mt-xs text-body2 text-weight-bold text-primary text-uppercase"},{default:l(()=>{var r,q,Q,P;return[i("span",Ft,m((P=(Q=(q=(r=e.studentsS.student)==null?void 0:r.user)==null?void 0:q.profile)==null?void 0:Q.name)!=null?P:""),1)]}),_:1}),t(g,{lines:"1",class:"q-mx-sm"},{default:l(()=>{var r,q,Q,P;return[b(m(e.t("Student Phone"))+" : "+m((P=(Q=(q=(r=e.studentsS.student)==null?void 0:r.user)==null?void 0:q.profile)==null?void 0:Q.phoneNumber)!=null?P:""),1)]}),_:1}),t(g,{lines:"1",class:"q-mx-sm"},{default:l(()=>{var r,q,Q,P;return[b(m(e.t("Parent Phone"))+" : "+m((P=(Q=(q=(r=e.studentsS.student)==null?void 0:r.user)==null?void 0:q.profile)==null?void 0:Q.parentPhoneNumber)!=null?P:""),1)]}),_:1}),t(g,{caption:"",lines:"2"},{default:l(()=>{var r,q,Q,P;return[e.studentsS.subscription!=null?(a(),f("span",At,m((q=(r=e.studentsS.subscription)==null?void 0:r.notes)!=null?q:""),1)):v("",!0),e.studentsS.subscription!=null?(a(),f("span",Ut," - ")):v("",!0),e.studentsS.subscription!=null?(a(),f("span",Nt,m((P=(Q=e.studentsS.subscription)==null?void 0:Q.notesDescription)!=null?P:""),1)):v("",!0)]}),_:1})]),i("div",Et,[t(h,{class:"q-mb-sm",color:"negative",size:"lg",flat:"",icon:"fa-solid fa-square-xmark",onClick:s[0]||(s[0]=r=>e.studentsS.clear())})]),i("div",Dt,[Qt,t(K,{flat:"",bordered:"",class:"q-mx-md q-pa-md full-width"},{default:l(()=>[i("div",Pt,[t(F),e.studentsS.subscription!=null&&e.studentsS.subscription.active?(a(),S(h,{key:0,stack:"",stretch:"",flat:"",color:"primary",icon:"fa-solid fa-user-pen",onClick:s[1]||(s[1]=r=>e.studentsS.showEditSubscriptionDialog=!0)},{default:l(()=>[b("Edit")]),_:1})):v("",!0),t(F),t(V,{vertical:"",inset:""}),t(F),t(h,{stack:"",stretch:"",flat:"",color:"primary",icon:"fa-solid fa-users"},{default:l(()=>{var r,q;return[b(m((q=(r=e.studentsS.subscription)==null?void 0:r.group)!=null?q:""),1)]}),_:1}),t(F),t(V,{vertical:"",inset:""}),t(F),t(h,{stack:"",flat:"",color:"primary",icon:"fa-solid fa-barcode",onClick:s[2]||(s[2]=r=>e.studentsS.showEditBarcodeForm=!e.studentsS.showEditBarcodeForm)},{default:l(()=>{var r;return[b(m((r=e.studentsS.student.barcode)!=null?r:"no bar code"),1)]}),_:1}),t(F),t(V,{vertical:"",inset:""}),t(F),t(h,{stack:"",flat:"",color:"primary",icon:"fa-solid fa-money-bill-wave"},{default:l(()=>{var r,q;return[b(m((q=(r=e.studentsS.subscription)==null?void 0:r.fees)!=null?q:""),1)]}),_:1}),t(F),t(V,{vertical:"",inset:""}),t(F),t(h,{stack:"",flat:"",color:"negative",icon:"fa-solid fa-money-bill-wave"},{default:l(()=>{var r,q;return[b(m((q=(r=e.studentsS.subscription)==null?void 0:r.remaining_fees)!=null?q:""),1)]}),_:1}),t(F)])]),_:1})])]),Bt,t(g,null,{default:l(()=>[i("div",It,[e.studentsS.subscription!=null&&e.studentsS.subscription.active?(a(),S(n,{key:0})):v("",!0)]),Lt,Tt,i("div",Rt,[!e.studentsS.showCreateStudentForm&&e.studentsS.isInCourse&&e.studentsS.subscription!=null&&e.studentsS.subscription.active?(a(),S(h,{key:0,stack:"",color:"primary",class:"q-ma-sm col-4",label:e.t("Add Attendance"),icon:"fa-solid fa-user-check",onClick:s[3]||(s[3]=r=>e.attendanceS.confirmCreateAttendance(!0))},null,8,["label"])):v("",!0),t(F),!e.studentsS.showCreateStudentForm&&e.studentsS.isInCourse&&e.studentsS.subscription!=null&&e.studentsS.subscription.active&&e.attendanceS.attendanceRecord!=null?(a(),S(h,{key:1,stack:"",color:"negative",class:"q-ma-sm col-4",label:e.t("Remove Attendance"),icon:"fa-solid fa-user-minus",onClick:s[4]||(s[4]=r=>e.attendanceS.removeAttendance(e.attendanceS.attendanceRecord))},null,8,["label"])):v("",!0)]),Kt,i("div",Gt,[e.studentsS.subscription!=null&&e.studentsS.subscription.active?(a(),S(h,{key:0,stack:"",color:"primary",class:"q-ma-sm col-4",label:e.t("Add Payment"),icon:"fa-solid fa-money-bill-wave",onClick:s[5]||(s[5]=r=>e.studentsS.showFeesForm=!0)},null,8,["label"])):v("",!0),t(F),e.studentsS.student!=null&&!e.studentsS.isInCourse?(a(),S(h,{key:1,stack:"",color:"positive",class:"q-ma-sm col-4",label:e.t("subscribe"),icon:"fa-solid fa-user",onClick:s[6]||(s[6]=r=>e.studentsS.showSubscribeForm=!0)},null,8,["label"])):v("",!0),e.studentsS.student!=null&&e.studentsS.subscription!=null&&e.studentsS.subscription.active?(a(),S(h,{key:2,stack:"",color:"negative",class:"q-ma-sm col-4",label:e.t("deactivate"),icon:"fa-solid fa-user-xmark",onClick:s[7]||(s[7]=r=>e.studentsS.deactivateConfirm())},null,8,["label"])):v("",!0),e.studentsS.student!=null&&e.studentsS.subscription!=null&&!e.studentsS.subscription.active?(a(),S(h,{key:3,stack:"",color:"primary",class:"q-ma-sm full-width",label:e.t("activate"),icon:"fa-solid fa-user-check",onClick:s[8]||(s[8]=r=>e.studentsS.activateConfirm())},null,8,["label"])):v("",!0)]),i("div",Mt,[e.studentsS.subscription!=null?(a(),f("div",Ot,[t(u,{modelValue:e.studentsS.showEditSubscriptionDialog,"onUpdate:modelValue":s[9]||(s[9]=r=>e.studentsS.showEditSubscriptionDialog=r)},null,8,["modelValue"])])):v("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),Ht,e.studentsS.student!=null?(a(),S(K,{key:0,flat:"",bordered:"",class:"q-mx-md"},{default:l(()=>[t(ee,null,{default:l(()=>[e.studentsS.student!=null&&e.attendanceS.selectedCourse!=null?(a(),f("div",Yt,[t(N,{outlined:"",type:"password",modelValue:e.studentsS.password,"onUpdate:modelValue":s[10]||(s[10]=r=>e.studentsS.password=r),placeholder:"password",class:"col-3"},null,8,["modelValue"]),t(F),t(N,{outlined:"",type:"password",modelValue:e.studentsS.repeatPassword,"onUpdate:modelValue":s[11]||(s[11]=r=>e.studentsS.repeatPassword=r),placeholder:"repeat password",class:"col-3"},null,8,["modelValue"]),t(F),t(h,{class:"q-pa-md",label:"change password",color:"primary",onClick:s[12]||(s[12]=r=>e.studentsS.changePassword())})])):v("",!0)]),_:1}),t(ee,null,{default:l(()=>[e.studentsS.student!=null?(a(),S(d,{key:0})):v("",!0)]),_:1})]),_:1})):v("",!0),e.studentsS.showFeesForm&&e.attendanceS.selectedCourse!=null&&e.studentsS.student!=null&&e.studentsS.subscription!=null?(a(),f("div",jt,[t(C,{modelValue:e.studentsS.showFeesForm,"onUpdate:modelValue":s[13]||(s[13]=r=>e.studentsS.showFeesForm=r)},null,8,["modelValue"])])):v("",!0),e.studentsS.showSubscribeForm?(a(),f("div",zt,[t(E,{modelValue:e.studentsS.showSubscribeForm,"onUpdate:modelValue":s[14]||(s[14]=r=>e.studentsS.showSubscribeForm=r)},null,8,["modelValue"])])):v("",!0),t(le,{bordered:"",flat:"",rows:e.studentsS.selected_student_courses,columns:e.columns,class:"q-ma-md"},null,8,["rows","columns"])])):(a(),f("div",Wt,[e.studentsS.showCreateStudentForm?(a(),f("div",Jt,[t(A,{modelValue:e.studentsS.showCreateStudentForm,"onUpdate:modelValue":s[15]||(s[15]=r=>e.studentsS.showCreateStudentForm=r),accesskey:e.studentsS.phoneNumber},null,8,["modelValue","accesskey"])])):(a(),f("div",Xt,[i("div",Zt,[t(N,{outlined:"",modelValue:e.studentsS.barcode,"onUpdate:modelValue":s[17]||(s[17]=r=>e.studentsS.barcode=r),placeholder:"Hard Copy Barcode",onChange:s[18]||(s[18]=r=>e.studentsS.search(!0))},{prepend:l(()=>[t(z,{name:"fa-solid fa-barcode",color:"primary"})]),default:l(()=>[t(h,{flat:"",color:"primary",icon:"fa-solid fa-magnifying-glass",onClick:s[16]||(s[16]=r=>e.studentsS.search(!0))})]),_:1},8,["modelValue"])]),_t,i("div",xt,[t(N,{autofocus:"",class:"col",outlined:"",maxlength:"20",modelValue:e.studentsS.phoneNumber,"onUpdate:modelValue":s[20]||(s[20]=r=>e.studentsS.phoneNumber=r),placeholder:"Mobile Barcode / Phone Number",onChange:s[21]||(s[21]=r=>e.studentsS.search(!1))},{prepend:l(()=>[t(z,{name:"fa-solid fa-phone",color:"primary"})]),default:l(()=>[t(h,{flat:"",icon:"fa-solid fa-magnifying-glass",onClick:s[19]||(s[19]=r=>e.studentsS.search(!1))})]),_:1},8,["modelValue"]),e.studentsS.phoneNumber.length!=0&&e.studentsS.phoneNumber.length<11?(a(),f("div",es,m(e.t("phone number must be 11 character at least")),1)):v("",!0)])]))])),e.studentsS.showEditBarcodeForm?(a(),f("div",ts,[t(k,{modelValue:e.studentsS.showEditBarcodeForm,"onUpdate:modelValue":s[22]||(s[22]=r=>e.studentsS.showEditBarcodeForm=r),onCancel:s[23]||(s[23]=r=>e.studentsS.showEditBarcodeForm=!1)},null,8,["modelValue"])])):v("",!0),e.studentsS.student!=null&&e.attendanceS.selectedCourse!=null&&((R=e.studentsS.subscription)==null?void 0:R.active)?(a(),S(D,{key:3,student:e.student,course:e.course,subscription:e.subscription},null,8,["student","course","subscription"])):v("",!0),ss,e.studentsS.student!=null&&e.attendanceS.selectedCourse!=null?(a(),S(L,{key:4})):v("",!0)])}var ns=I($t,[["render",ls]]);const os=B({name:"attendance-list",data(){const{locale:e,t:s}=O({useScope:"global"}),c=M(),y=Y(),$=[{label:s("Date"),name:"date",sortable:!0,align:"left",field:o=>o==null?void 0:o.date},{label:s("Course"),name:"course",sortable:!0,align:"left",field:o=>(o==null?void 0:o.course)==null?"error":o.course.name},{label:s("Lesson"),name:"lesson",sortable:!0,align:"left",field:o=>(o==null?void 0:o.lesson)==null?"error":o.lesson.title},{label:s("Group"),name:"group",sortable:!0,align:"left",field:o=>o==null?void 0:o.group},{label:s("Name"),name:"name",sortable:!0,align:"left",field:o=>{var n,u,d;return(o==null?void 0:o.student)==null?"error":(d=(u=(n=o.student)==null?void 0:n.user)==null?void 0:u.profile)==null?void 0:d.name}},{label:s("Mobile"),name:"mobile",sortable:!0,align:"left",field:o=>{var n,u,d;return(o==null?void 0:o.student)==null?"error":(d=(u=(n=o.student)==null?void 0:n.user)==null?void 0:u.profile)==null?void 0:d.phoneNumber}},{label:s("Barcode"),name:"barcode",sortable:!0,align:"left",field:function(o){var n;return(o==null?void 0:o.student)==null?"error":(n=o.student.barcode)!=null?n:"no bar code"}},{label:s("Student Group"),name:"student group",sortable:!0,align:"left",field:function(o){return o==null?void 0:o.student_group}}];return{locale:e,t:s,authS:c,attendanceS:y,filter:"",columns:$}}}),as={class:"row q-mb-sm q-mt-xl q-mx-md"},us={class:"text-h6"},ds={key:0},rs={class:"row"},is=i("th",null,null,-1),ms={key:1};function ps(e,s,c,y,$,o){return a(),f(H,null,[i("div",as,[i("div",us,m(e.t("Attendance Log")),1),t(F)]),e.attendanceS.filteredAttendance!=null?(a(),f("div",ds,[t(le,{class:"q-ma-md",flat:"",bordered:"","row-key":"id",rows:e.attendanceS.attendance,columns:e.columns,filter:e.filter},{"top-right":l(()=>[i("div",rs,[t(N,{dense:"",outlined:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":s[0]||(s[0]=n=>e.filter=n),placeholder:e.t("Search")},{append:l(()=>[t(z,{name:"fa-solid fa-magnifying-glass"})]),_:1},8,["modelValue","placeholder"]),t(h,{onClick:s[1]||(s[1]=n=>e.filter=""),icon:"fa-solid fa-square-xmark",color:"negative",flat:""}),t(h,{onClick:s[2]||(s[2]=n=>e.attendanceS.getAttendance()),icon:"fa-solid fa-arrows-rotate",color:"positive",flat:""})])]),header:l(n=>[t(X,{props:n},{default:l(()=>[(a(!0),f(H,null,W(n.cols,u=>(a(),S(te,{key:u.name,props:n,class:"text-bold text-primary"},{default:l(()=>[b(m(u.label),1)]),_:2},1032,["props"]))),128)),is]),_:2},1032,["props"])]),body:l(n=>[t(X,{props:n},{default:l(()=>[(a(!0),f(H,null,W(n.cols,u=>(a(),S(Z,{key:u.name,props:n,onClick:d=>e.filter=u.value},{default:l(()=>[b(m(u.value),1)]),_:2},1032,["props","onClick"]))),128)),t(Z,null,{default:l(()=>[t(h,{stack:"",color:"negative",class:"q-ma-sm col-4",label:e.t("Remove Attendance"),icon:"mdi-account-multiple-remove-outline",onClick:u=>e.attendanceS.confirmRemoveAttendance(n.row)},null,8,["label","onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"])])):(a(),f("div",ms,"no elements"))],64)}var cs=I(os,[["render",ps]]);const fs=B({name:"attendance-list",components:{feesPrintable:ue},data(){const e=M(),{locale:s,t:c}=O({useScope:"global"}),y=J(),$=[{label:c("Date"),name:"date",sortable:!0,align:"left",field:o=>ye(o==null?void 0:o.created_at).format("YYYY-MM-DD hh:mm:ss A")},{label:c("Course"),name:"course",sortable:!0,align:"left",field:o=>{var n,u;return(u=(n=o==null?void 0:o.subscription)==null?void 0:n.course)==null?void 0:u.name}},{label:c("Name"),name:"name",sortable:!0,align:"left",field:o=>{var n,u,d,C;return(C=(d=(u=(n=o==null?void 0:o.subscription)==null?void 0:n.student)==null?void 0:u.user)==null?void 0:d.profile)==null?void 0:C.name}},{label:c("Mobile"),name:"mobile",sortable:!0,align:"left",field:o=>{var n,u,d,C;return(C=(d=(u=(n=o==null?void 0:o.subscription)==null?void 0:n.student)==null?void 0:u.user)==null?void 0:d.profile)==null?void 0:C.phoneNumber}},{label:c("Amount"),name:"paid amount",sortable:!0,align:"left",field:o=>o==null?void 0:o.amount},{label:c("Type"),name:"type",sortable:!0,align:"left",field:o=>o==null?void 0:o.type},{label:c("Notes"),name:"notes",sortable:!0,align:"left",field:o=>o==null?void 0:o.notes}];return{t:c,locale:s,authS:e,feesS:y,columns:$}}}),Ss={class:"row q-mb-sm q-mt-xl q-mx-md"},bs={class:"text-h6"},vs={key:0},ys={class:"row"},hs={key:0},ks={key:1};function gs(e,s,c,y,$,o){const n=U("feesPrintable");return a(),f("div",null,[i("div",Ss,[i("div",bs,m(e.t("Fees Log")),1)]),e.feesS.docs!=null?(a(),f("div",vs,[t(le,{class:"q-ma-md","row-key":"id",flat:"",bordered:"",rows:e.feesS.docs,columns:e.columns,loading:e.feesS.working},{"top-right":l(()=>[i("div",ys,[t(h,{onClick:s[0]||(s[0]=u=>e.feesS.getCurrentCourseFeesTransactions()),icon:"fa-solid fa-arrows-rotate",color:"positive",flat:""})])]),header:l(u=>[t(X,{props:u},{default:l(()=>[(a(!0),f(H,null,W(u.cols,d=>(a(),S(te,{key:d.name,props:u,class:"text-bold text-primary"},{default:l(()=>[b(m(d.label),1)]),_:2},1032,["props"]))),128)),t(te,{"auto-width":""})]),_:2},1032,["props"])]),body:l(u=>[t(X,{props:u},{default:l(()=>[(a(!0),f(H,null,W(u.cols,d=>(a(),S(Z,{key:d.name,props:u},{default:l(()=>[b(m(d.value),1)]),_:2},1032,["props"]))),128)),t(Z,{"auto-width":""},{default:l(()=>{var d;return[t(h,{flat:"",color:"primary",icon:"fa-solid fa-print",onClick:C=>e.feesS.print(u.row)},null,8,["onClick"]),u.row.id==((d=e.feesS.transaction)==null?void 0:d.id)?(a(),f("div",hs,[t(n,{modelValue:e.feesS.showPrintable,"onUpdate:modelValue":s[1]||(s[1]=C=>e.feesS.showPrintable=C)},null,8,["modelValue"])])):v("",!0)]}),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])):(a(),f("div",ks,"no elements"))])}var $s=I(fs,[["render",gs]]);const Cs=B({name:"attendance-create-form",components:{studentSelectionForm:ns,attendanceList:cs,feesList:$s},computed:{lesson(){return this.attendanceS.selectedLesson}},data(){const{locale:e,t:s}=O({useScope:"global"}),c=M(),y=Y(),$=G(),o=J();return{locale:e,t:s,authS:c,attendanceS:y,feesS:o,lessonsS:ge(),homeworkAnswersS:se(),studentsS:$,courseOptions:[]}},mounted(){var e,s;console.log("attendance create form mounted"),this.courseOptions=(s=(e=this.authS.user)==null?void 0:e.courseOptions)!=null?s:[],this.studentsS.selectedSubscription=this.studentsS.subscription}}),ws={key:0},Vs={key:1},qs={class:"row full-width"},Fs={key:0},As=i("br",null,null,-1),Us=i("br",null,null,-1);function Ns(e,s,c,y,$,o){var C,E;const n=U("studentSelectionForm"),u=U("attendanceList"),d=U("feesList");return e.courseOptions==null?(a(),f("div",ws)):(a(),f("div",Vs,[i("div",qs,[t(T,{outlined:"","use-input":"",label:(C=e.attendanceS.selectedCourse)==null?void 0:C.midTerm,class:"q-my-md q-px-md col-12",modelValue:e.attendanceS.selectedCourse,"onUpdate:modelValue":[s[1]||(s[1]=A=>e.attendanceS.selectedCourse=A),s[2]||(s[2]=A=>e.attendanceS.initSelectedCourse())],"emit-value":"","map-options":"",options:e.courseOptions},{append:l(()=>[e.attendanceS.selectedCourse!==null?(a(),S(z,{key:0,class:"cursor-pointer",name:"clear",onClick:s[0]||(s[0]=x(A=>e.attendanceS.selectedCourse=null,["stop","prevent"]))})):v("",!0)]),"no-option":l(()=>[t(w,null,{default:l(()=>[t(p,{class:"text-grey"},{default:l(()=>[b(" No results ")]),_:1})]),_:1})]),_:1},8,["label","modelValue","options"]),e.attendanceS.selectedCourse!=null?(a(),S(T,{key:0,outlined:"",class:"q-px-md col-6",label:e.t("Lesson"),modelValue:e.attendanceS.selectedLesson,"onUpdate:modelValue":[s[4]||(s[4]=A=>e.attendanceS.selectedLesson=A),s[5]||(s[5]=A=>e.attendanceS.getAttendance())],"emit-value":"","map-options":"",options:e.attendanceS.selectedCourse.lessonOptions},{append:l(()=>[e.attendanceS.selectedLesson!==null?(a(),S(z,{key:0,class:"cursor-pointer",name:"clear",onClick:s[3]||(s[3]=x(A=>e.attendanceS.selectedLesson=null,["stop","prevent"]))})):v("",!0)]),"no-option":l(()=>[t(w,null,{default:l(()=>[t(p,{class:"text-grey"},{default:l(()=>[b(" No results ")]),_:1})]),_:1})]),_:1},8,["label","modelValue","options"])):v("",!0),t(F),e.attendanceS.selectedCourse!=null?(a(),S(T,{key:1,outlined:"",class:"q-px-md col-6",label:e.t("Group"),modelValue:e.attendanceS.selectedGroup,"onUpdate:modelValue":[s[7]||(s[7]=A=>e.attendanceS.selectedGroup=A),s[8]||(s[8]=A=>e.attendanceS.getAttendance())],"emit-value":"","map-options":"",options:e.attendanceS.selectedCourse.groups},{append:l(()=>[e.attendanceS.selectedGroup!==null?(a(),S(z,{key:0,class:"cursor-pointer",name:"clear",onClick:s[6]||(s[6]=x(A=>e.attendanceS.selectedGroup=null,["stop","prevent"]))})):v("",!0)]),"no-option":l(()=>[t(w,null,{default:l(()=>[t(p,{class:"text-grey"},{default:l(()=>[b(" No results ")]),_:1})]),_:1})]),_:1},8,["label","modelValue","options"])):v("",!0)]),e.attendanceS.selectedCourse!=null&&e.attendanceS.selectedGroup!=null&&e.attendanceS.selectedLesson!=null&&e.attendanceS.selectedGroup!=""?(a(),f("div",Fs,[As,t(n),Us,t(h,{class:"q-ma-xl full-width",color:"primary",to:"/courses/"+((E=e.attendanceS.selectedCourse)==null?void 0:E.id)+"/lessons/"+e.attendanceS.selectedLesson.id+"/new-exam"},{default:l(()=>[b("Exam")]),_:1},8,["to"])])):v("",!0),e.attendanceS.selectedGroup!=null&&e.attendanceS.selectedLesson!=null&&e.attendanceS.selectedCourse!=null&&e.attendanceS.working==!1?(a(),S(u,{key:1})):v("",!0),e.attendanceS.selectedGroup!=null&&e.attendanceS.selectedLesson!=null&&e.attendanceS.selectedCourse!=null&&!e.feesS.working?(a(),S(d,{key:2})):v("",!0)]))}var Es=I(Cs,[["render",Ns]]);const Ds=B({name:"PageIndex",components:{loginForm:be,working:ve,attendanceCreateForm:Es},setup(){return{auth:M()}}}),Qs={key:1},Ps={key:1};function Bs(e,s,c,y,$,o){const n=U("working"),u=U("loginForm"),d=U("attendanceCreateForm");return a(),S(Ae,{class:"q-pa-md"},{default:l(()=>[e.auth.working?(a(),S(n,{key:0})):(a(),f("div",Qs,[e.auth.user==null?(a(),S(u,{key:0})):(a(),f("div",Ps,[t(d)]))]))]),_:1})}var il=I(Ds,[["render",Bs]]);export{il as default};
