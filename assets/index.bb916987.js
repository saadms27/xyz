import{Q as be}from"./QCircularProgress.f0d12216.js";import{k as ye,ar as ce,as as ge,r as ue,at as we,c as j,au as _e,w as ie,o as qe,h as M,N as y,l as ke,Q as b,g as Se,ak as De,d as fe,_ as pe,G as r,H as v,K as l,j as s,R as h,C as S,aa as L,Z as N,Y as Ce,J as Ve,P as f,F as T,ad as G,M as q,av as re,aw as B,L as w,O as k,ax as Ye,ay as Qe,az as Me}from"./index.ce7ea90d.js";import{Q as W}from"./QSpace.28cd6bbf.js";import{Q as C}from"./QItemLabel.c0d04a15.js";import{h as p,l as de,a as Re,c as Be,d as V,Q as Y}from"./auth.fdd9f60a.js";import{Q as he}from"./QDate.d6b9f846.js";import{Q as K,C as D}from"./ClosePopup.d81e89df.js";import{Q as Ae}from"./QTime.5dfdd3a9.js";import{Q as Oe}from"./QBadge.152ed4a3.js";import{Q as $e,a as Ie}from"./QSelect.6c45d970.js";import{Q as He,a as F}from"./QTable.0202606a.js";import{Q as me}from"./QTr.64def1a2.js";import{Q as z}from"./QTd.4bd4834f.js";import{Q as Ue}from"./QList.8b3bec6d.js";import{Q as Ee}from"./QBtnGroup.03e26965.js";import{r as Pe}from"./rewatch_requests.2d165849.js";import{u as je}from"./vue-i18n.9cee7702.js";import"./axios.1ff92d29.js";import"./index.8e8f3c06.js";import"./_commonjsHelpers.4e997714.js";import"./use-render-cache.1a7235d4.js";import"./TouchPan.97db9c47.js";import"./touch.3df10340.js";import"./selection.0b8105e5.js";import"./QField.ebc53bc9.js";function J(e){var t,o,u;return e==null||typeof e=="number"?"":((o=(t=e.academic_year)==null?void 0:t.faculty)==null?void 0:o.enName)+" - "+((u=e.academic_year)==null?void 0:u.enName)+" - "+e.enName}var ve=(e=>(e.open="open",e.approved="approved",e.denied="denied",e.watched="watched",e))(ve||{});const Ne=Object.keys(ce),Fe=e=>Ne.reduce((t,o)=>{const u=e[o];return u!==void 0&&(t[o]=u),t},{});var ze=ye({name:"QBtnDropdown",props:{...ce,...ge,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:o}){const{proxy:u}=Se(),n=ue(e.modelValue),m=ue(null),c=we(),a=j(()=>{const d={"aria-expanded":n.value===!0?"true":"false","aria-haspopup":"true","aria-controls":c.value,"aria-label":e.toggleAriaLabel||u.$q.lang.label[n.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(d["aria-disabled"]="true"),d}),i=j(()=>"q-btn-dropdown__arrow"+(n.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),g=j(()=>_e(e)),_=j(()=>Fe(e));ie(()=>e.modelValue,d=>{m.value!==null&&m.value[d?"show":"hide"]()}),ie(()=>e.split,Q);function O(d){n.value=!0,o("beforeShow",d)}function $(d){o("show",d),o("update:modelValue",!0)}function I(d){n.value=!1,o("beforeHide",d)}function H(d){o("hide",d),o("update:modelValue",!1)}function U(d){o("click",d)}function E(d){De(d),Q(),o("click",d)}function P(d){m.value!==null&&m.value.toggle(d)}function R(d){m.value!==null&&m.value.show(d)}function Q(d){m.value!==null&&m.value.hide(d)}return Object.assign(u,{show:R,hide:Q,toggle:P}),qe(()=>{e.modelValue===!0&&R()}),()=>{const d=[M(y,{class:i.value,name:e.dropdownIcon||u.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&d.push(M($e,{ref:m,id:c.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:O,onShow:$,onBeforeHide:I,onHide:H},t.default)),e.split===!1?M(b,{class:"q-btn-dropdown q-btn-dropdown--simple",..._.value,...a.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:U},{default:()=>ke(t.label,[]).concat(d),loading:t.loading}):M(Ee,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...g.value,glossy:e.glossy,stretch:e.stretch},()=>[M(b,{class:"q-btn-dropdown--current",..._.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:E},{default:t.label,loading:t.loading}),M(b,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...a.value,...g.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>d)])}}});const Le=fe({name:"date_input",watch:{date(e){this.$emit("change",e)}},data(){return{date:p().format("DD-MM-YYYY")}}}),xe={class:"row items-center justify-end"};function Te(e,t,o,u,n,m){return r(),v(L,{filled:"",dense:"",modelValue:e.date,"onUpdate:modelValue":t[1]||(t[1]=c=>e.date=c),mask:"##-##-####",style:{width:"150px"}},{append:l(()=>[s(y,{name:"event",class:"cursor-pointer"},{default:l(()=>[s(K,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[s(he,{modelValue:e.date,"onUpdate:modelValue":t[0]||(t[0]=c=>e.date=c),mask:"DD-MM-YYYY"},{default:l(()=>[h("div",xe,[S(s(b,{label:"Close",color:"primary",flat:""},null,512),[[D]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var Ge=pe(Le,[["render",Te]]);const We=fe({name:"rewatch-requests-index",components:{DateInput:Ge},methods:{sectionName:J,approve(e){N.create({message:"Are you sure?"}).onOk(async()=>{e.status==ve.open&&((e.date==null||p(e.date).isBefore(p()))&&console.log(e.date),await this.rewatchRequestsS.update(e,{status:"approved",duration:this.duration}),this.queryRewatchRequests())})},approveSelected(){N.create({message:"Are you sure?"}).onOk(async()=>{var e;for(const t of this.requests)t.status=="open"&&t.selected&&(t.date==null||p(t.date).isBefore(p()),await this.rewatchRequestsS.update(t,{status:"approved",duration:this.duration})!=null&&de({action:"approvedRewatchRequest",student_id:(e=t.student)==null?void 0:e.id,req_id:parseInt(t.id.toString())}));this.queryRewatchRequests()})},denySelected(){N.create({message:"Are you sure?"}).onOk(async()=>{var t;for(let o=0;o<this.requests.length;o++){const u=this.requests[o];if(u.status=="open"&&u.selected){var e=await this.rewatchRequestsS.update(u,{status:"denied"});e!=null&&de({action:"deniedRewatchRequest",student_id:(t=u.student)==null?void 0:t.id,req_id:parseInt(u.id.toString())})}}this.queryRewatchRequests()})},deny(e){N.create({message:"Are you sure?"}).onOk(async()=>{e.status=="open"&&await this.rewatchRequestsS.update(e,{status:"denied"}),this.queryRewatchRequests()})},csvExport(){console.log("Exporting data");var e=[];this.requests.forEach(n=>{var m,c,a,i,g,_,O,$,I,H,U,E,P,R,Q,d,Z,X,ee,te,ae,se;e.push({id:n.id,status:n.status,Lesson:(m=n.lesson)==null?void 0:m.title,student:(a=(c=n.student)==null?void 0:c.user)==null?void 0:a.username,"student Name":(_=(g=(i=n.student)==null?void 0:i.user)==null?void 0:g.profile)==null?void 0:_.name,date:n.status=="denied"?"-":n.formattedDate,Duration:n.status=="open"||n.status=="denied"?"-":n.duration+" hours",Progress:(n.status=="approved"||n.status=="watched")&&n.progress!=null?(n.progress*100).toFixed(2)+" %":"-",minutes:(n.status=="approved"||n.status=="watched")&&n.progress!=null?((O=n.minutes)!=null?O:0).toFixed(2):"-","Faculty Sections":(U=(H=(I=($=n.lesson)==null?void 0:$.course_section)==null?void 0:I.course)==null?void 0:H.faculty_sections)==null?void 0:U.map(x=>J(x)).join(";"),course:(R=(P=(E=n.lesson)==null?void 0:E.course_section)==null?void 0:P.course)==null?void 0:R.name,Instructor:(d=(Q=this.authS.instructors.filter(x=>{var le,oe,ne;return x.value.id==((ne=(oe=(le=n.lesson)==null?void 0:le.course_section)==null?void 0:oe.course)==null?void 0:ne.instructor)})[0].value.user)==null?void 0:Q.profile)==null?void 0:d.name,term:(ee=(X=(Z=n.lesson)==null?void 0:Z.course_section)==null?void 0:X.course)==null?void 0:ee.term,midterm:(se=(ae=(te=n.lesson)==null?void 0:te.course_section)==null?void 0:ae.course)==null?void 0:se.midTerm,"Created At":p(n.created_at).format("DD/MM/YYYY HH:mm")})});let t="data:text/csv;charset=utf-8,\uFEFF";t+=[Object.keys(e[0]).join(","),...e.map(n=>Object.values(n).join(","))].join(`
`).replace(/(^\[)|(\]$)/gm,"");const o=encodeURI(t),u=document.createElement("a");u.setAttribute("href",o),u.setAttribute("download","export.csv"),u.click(),console.log("Exporting data done")},async queryRewatchRequests(){var o,u,n,m;if(console.log("queryRewatchRequests called"),this.authS.isAssistant){var e="";(n=(u=(o=this.authS.user)==null?void 0:o.profile)==null?void 0:u.assistant_courses)==null||n.forEach(c=>{e+="&lesson.course_section.course="+c.id});var t="status="+this.status+e+"&created_at_gte="+p(this.minDate,"DD/MM/YYYY").startOf("day").toISOString()+"&created_at_lte="+p(this.maxDate,"DD/MM/YYYY").endOf("day").toISOString();console.log(t),await this.rewatchRequestsS.query(t)}else await this.rewatchRequestsS.query("status="+this.status+"&lesson.course_section.course.academic_year.faculty_section.faculty="+((m=this.attendanceS.selectedCourse)==null?void 0:m.id)+"&created_at_gte="+p(this.minDate,"DD/MM/YYYY").startOf("day").toISOString()+"&created_at_lte="+p(this.maxDate,"DD/MM/YYYY").endOf("day").toISOString());this.requests=[],this.rewatchRequestsS.list.forEach(c=>{var i;var a=c;a.selected=!1,((i=a.duration)!=null?i:0)<3&&(a.duration=4),this.requests.push(a)}),Ce.create("Done, found "+this.requests.length+" items")},moment:p},data:()=>{var n;const e=Pe(),t=Re(),{t:o}=je({useScope:"global"}),u=[];if(t.user!=null)for(let m=0;m<t.user.courseOptions.length;m++){const c=t.user.courseOptions[m];u.map(a=>a.id.toString()).indexOf(c==null?void 0:c.value.faculty.id.toString())<0&&u.push(c.value.faculty)}return{faculties:u,faculty:null,t:o,courseOptions:(n=t.user)==null?void 0:n.courseOptions,authS:t,rewatchRequestsS:e,attendanceS:Be(),filter:"",status:"open",minDate:p().subtract(2,"days").format("DD/MM/YYYY HH:mm"),maxDate:p().format("DD/MM/YYYY HH:mm"),pagination:{sortBy:"Created At",descending:!0,rowsPerPage:20},visibleColumns:["Created At","date","student","student Name","Course","Lesson","Views Count","Requests Count"],columns:[],requests:[],date:p().format("DD/MM/YYYY HH:mm"),duration:4}},async mounted(){this.columns=[{name:"expired",label:"Expired",field:e=>e.status=="open"&&p(e.date).isBefore(p()),align:"left",sortable:!0},{name:"Created At",label:"Created At",field:e=>p(e.created_at).format("DD/MM/YYYY HH:mm"),align:"left",sortable:!0},{name:"date",label:"Date",field:e=>e.status=="denied"?"-":e.formattedDate,align:"left",sortable:!0},{name:"Duration (hours)",label:"Duration",field:e=>e.status=="open"||e.status=="denied"?0:e.duration,align:"center",sortable:!0,sort:(e,t)=>e-t},{name:"Progress",label:"Progress",field:e=>(e.status=="approved"||e.status=="watched")&&e.progress!=null?(e.progress*100).toFixed(2):0,align:"center",sortable:!0,sort:(e,t)=>e-t},{name:"minutes",label:"Minutes",field:e=>{var t;return(e.status=="approved"||e.status=="watched")&&e.progress!=null?((t=e.minutes)!=null?t:0).toFixed(2):0},align:"center",sortable:!0,sort:(e,t)=>e-t},{name:"student",label:"Student",field:e=>{var t,o;return(o=(t=e.student)==null?void 0:t.user)==null?void 0:o.username},align:"left",sortable:!0},{name:"student Name",label:"Student Name",field:e=>{var t,o,u;return(u=(o=(t=e.student)==null?void 0:t.user)==null?void 0:o.profile)==null?void 0:u.name},align:"left",sortable:!0},{name:"Faculty Sections",label:"Faculty Sections",field:e=>{var t,o,u,n,m,c;return((u=(o=(t=e.lesson)==null?void 0:t.course_section)==null?void 0:o.course)==null?void 0:u.faculty_sections)==null?"error":(c=(m=(n=e.lesson)==null?void 0:n.course_section)==null?void 0:m.course)==null?void 0:c.faculty_sections.map(a=>J(a)).join(";")},align:"left",sortable:!0},{name:"Course",label:"Course",field:e=>{var t,o,u,n,m,c;return((n=(u=(o=(t=e.lesson)==null?void 0:t.course_section)==null?void 0:o.course)==null?void 0:u.name)!=null?n:"")+" - "+((c=(m=this.authS.instructors.filter(a=>{var i,g,_;return a.value.id==((_=(g=(i=e.lesson)==null?void 0:i.course_section)==null?void 0:g.course)==null?void 0:_.instructor)})[0].value.user)==null?void 0:m.profile)==null?void 0:c.name)},align:"left",sortable:!0},{name:"term",label:"term",field:e=>{var t,o,u;return(u=(o=(t=e.lesson)==null?void 0:t.course_section)==null?void 0:o.course)==null?void 0:u.term},align:"left",sortable:!0},{name:"mid term",label:"mid term",field:e=>{var t,o,u;return(u=(o=(t=e.lesson)==null?void 0:t.course_section)==null?void 0:o.course)==null?void 0:u.midTerm},align:"left",sortable:!0},{name:"Lesson",label:"Lesson",field:e=>{var t;return(t=e.lesson)==null?void 0:t.title},align:"left",sortable:!0},{name:"Requests Count",label:"Views",field:e=>{var t;return(t=e.requests)!=null?t:0},align:"center",sortable:!0,sort:(e,t)=>e-t}]}}),A=e=>(Qe("data-v-f54f0da6"),e=e(),Me(),e),Je={class:"q-pa-md"},Ke={key:1},Ze={key:0},Xe={class:"row q-mx-md q-my-md"},et={class:"row q-mx-md q-my-md"},tt=A(()=>h("b",{style:{"margin-top":"10px","margin-right":"20px"}},"Start Date",-1)),at={class:"row q-mx-md q-my-md"},st=A(()=>h("b",{style:{"margin-top":"10px","margin-right":"25px"}},"End Date",-1)),lt=A(()=>h("br",null,null,-1)),ot=A(()=>h("b",null,"Scheduled Date",-1)),nt={class:"row q-mx-md q-my-md"},ut={class:"row items-center justify-end"},it={class:"row items-center justify-end"},rt=A(()=>h("b",null,"Duration",-1)),dt={class:"q-pa-md full-width"},mt={class:"row"},ct={key:0,class:"text-center"},ft={key:1,class:"text-center"},pt={key:2,class:"text-center"},ht={key:3,class:"text-center"},vt={key:4,class:"text-center"},bt={key:0},yt=["onClick"],gt={key:1},wt={key:0,style:{color:"red"}},_t={key:1},qt={key:2},kt={key:0,style:{color:"red"}},St={key:1},Dt={key:3};function Ct(e,t,o,u,n,m){const c=Ve("DateInput");return r(),f("div",Je,[e.rewatchRequestsS.working?(r(),v(be,{key:0,indeterminate:"",size:"50px",color:"primary",class:"q-ma-md fixed-center","z-index":"1000"})):(r(),f("div",Ke,[!e.authS.isAssistant&&e.faculties!=null&&e.faculties.length>0?(r(),f("div",Ze,[(r(!0),f(T,null,G(e.faculties.length+1,a=>(r(),f("div",{key:a,style:{margin:"0","padding-top":"5px"}},[e.faculties[a-1]!=null?(r(),v(B,{key:0,modelValue:e.faculty,"onUpdate:modelValue":t[0]||(t[0]=i=>e.faculty=i),label:e.faculties[a-1].enName,val:e.faculties[a-1].id},null,8,["modelValue","label","val"])):q("",!0)]))),128))])):q("",!0),s(re,{flat:"",bordered:"",class:"q-mx-md"},{default:l(()=>[h("div",Xe,[s(B,{modelValue:e.status,"onUpdate:modelValue":t[1]||(t[1]=a=>e.status=a),label:"Open",val:"open"},null,8,["modelValue"]),s(B,{modelValue:e.status,"onUpdate:modelValue":t[2]||(t[2]=a=>e.status=a),label:"Approved",val:"approved"},null,8,["modelValue"]),s(B,{modelValue:e.status,"onUpdate:modelValue":t[3]||(t[3]=a=>e.status=a),label:"Denied",val:"denied"},null,8,["modelValue"]),s(B,{modelValue:e.status,"onUpdate:modelValue":t[4]||(t[4]=a=>e.status=a),label:"Watched",val:"watched"},null,8,["modelValue"])]),h("div",et,[tt,s(c,{onChange:t[5]||(t[5]=a=>{e.minDate=a})})]),h("div",at,[st,s(c,{onChange:t[6]||(t[6]=a=>{e.maxDate=a})}),s(W),s(b,{label:"Get Requests",class:"q-pa-md",color:"primary",onClick:t[7]||(t[7]=a=>e.queryRewatchRequests())})])]),_:1}),lt,e.status=="open"&&e.requests.length>0?(r(),v(re,{key:1,flat:"",bordered:"",class:"q-mx-md",style:{padding:"15px"}},{default:l(()=>[s(Y,null,{default:l(()=>[s(V,null,{default:l(()=>[s(C,null,{default:l(()=>[ot]),_:1})]),_:1})]),_:1}),h("div",nt,[s(L,{borderless:"",filled:"",modelValue:e.date,"onUpdate:modelValue":t[10]||(t[10]=a=>e.date=a)},{prepend:l(()=>[s(y,{name:"event",class:"cursor-pointer"},{default:l(()=>[s(K,{"transition-show":"scale","transition-hide":"scale"},{default:l(()=>[s(he,{modelValue:e.date,"onUpdate:modelValue":t[8]||(t[8]=a=>e.date=a),mask:"DD/MM/YYYY HH:mm"},{default:l(()=>[h("div",ut,[S(s(b,{label:"Close",color:"primary",flat:""},null,512),[[D]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),append:l(()=>[s(y,{name:"access_time",class:"cursor-pointer"},{default:l(()=>[s(K,{"transition-show":"scale","transition-hide":"scale"},{default:l(()=>[s(Ae,{modelValue:e.date,"onUpdate:modelValue":t[9]||(t[9]=a=>e.date=a),mask:"DD/MM/YYYY HH:mm",format24h:""},{default:l(()=>[h("div",it,[S(s(b,{label:"Close",color:"primary",flat:""},null,512),[[D]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),s(Y,null,{default:l(()=>[s(V,null,{default:l(()=>[s(C,null,{default:l(()=>[rt]),_:1})]),_:1})]),_:1}),h("div",dt,[s(Oe,{ckass:"q-mb-lg",color:"primary"},{default:l(()=>[w(k(e.duration)+" hours",1)]),_:1}),s(L,{class:"full-width",type:"number",min:1,max:10,modelValue:e.duration,"onUpdate:modelValue":t[11]||(t[11]=a=>e.duration=a),placeholder:"Duration"},null,8,["modelValue"])]),h("div",mt,[s(b,{class:"q-ma-md",color:"green",label:"select all",onClick:t[12]||(t[12]=a=>e.requests.forEach(i=>i.selected=!0))}),s(b,{class:"q-ma-md",color:"red",label:"select none",onClick:t[13]||(t[13]=a=>e.requests.forEach(i=>i.selected=!1))}),s(W),s(b,{class:"q-ma-md",color:"red",onClick:t[14]||(t[14]=a=>e.denySelected()),label:"deny all selected"}),s(b,{class:"q-ma-md",color:"green",onClick:t[15]||(t[15]=a=>e.approveSelected()),label:"approve all selected"})])]),_:1})):q("",!0),s(He,{class:"q-mx-md",flat:"",rows:e.requests,columns:e.columns,"row-key":"id",filter:e.filter,pagination:e.pagination,"visible-columns":e.visibleColumns},{top:l(()=>[s(Ie,{modelValue:e.visibleColumns,"onUpdate:modelValue":t[16]||(t[16]=a=>e.visibleColumns=a),multiple:"",outlined:"",dense:"",filled:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.columns,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"]),s(W),e.authS.isSuper?(r(),v(b,{key:0,class:"q-ma-md",color:"primary",onClick:t[17]||(t[17]=a=>e.csvExport())},{default:l(()=>[w("Export csv")]),_:1})):q("",!0),s(L,{dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":t[18]||(t[18]=a=>e.filter=a),outlined:"",placeholder:"Search"},{append:l(()=>[s(y,{name:"fa-solid fa-magnifying-glass"})]),_:1},8,["modelValue"])]),header:l(a=>[s(me,{props:a},{default:l(()=>[s(F,null,{default:l(()=>[w(" Selected ")]),_:1}),s(F,{class:"text-center"},{default:l(()=>[s(y,{name:"mdi-checkbox-blank-outline",style:{"font-size":"1.5em"}})]),_:1}),(r(!0),f(T,null,G(a.cols,i=>(r(),v(F,{key:i.name,props:a,class:"text-bold text-primary"},{default:l(()=>[w(k(i.label),1)]),_:2},1032,["props"]))),128)),e.authS.isAssistant?q("",!0):(r(),v(F,{key:0,"auto-width":""}))]),_:2},1032,["props"])]),body:l(a=>[s(me,{props:a},{default:l(()=>[s(z,null,{default:l(()=>[s(Ye,{modelValue:a.row.selected,"onUpdate:modelValue":i=>a.row.selected=i},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(z,null,{default:l(()=>[a.row.status=="approved"?(r(),f("div",ct,[s(y,{color:"green",name:"mdi-check-box-outline",style:{"font-size":"1.5em"},"absolute-center":""})])):a.row.status=="watched"?(r(),f("div",ft,[s(y,{color:"primary",name:"mdi-eye",style:{"font-size":"1.5em"},"absolute-center":""})])):a.row.status=="denied"?(r(),f("div",pt,[s(y,{color:"red",name:"mdi-close-box-outline",style:{"font-size":"1.5em"}})])):a.row.status=="open"&&e.moment(a.row.date).isBefore(e.moment())?(r(),f("div",ht,[s(y,{color:"negative",name:"mdi-minus-box-outline",style:{"font-size":"1.5em"}})])):(r(),f("div",vt,[s(y,{name:"mdi-checkbox-blank-outline",style:{"font-size":"1.5em"}})]))]),_:2},1024),(r(!0),f(T,null,G(a.cols,i=>(r(),v(z,{key:i.name,props:a},{default:l(()=>[i.name=="student"?(r(),f("div",bt,[h("a",{style:{color:"blue","text-decoration":"underline"},onClick:g=>e.filter=i.value},k(i.value),9,yt)])):i.name=="Views Count"?(r(),f("div",gt,[a.row.views!=0?(r(),f("div",wt,k(i.value),1)):(r(),f("div",_t,k(i.value),1))])):i.name=="Requests Count"?(r(),f("div",qt,[a.row.requests!=0?(r(),f("div",kt,k(i.value),1)):(r(),f("div",St,k(i.value),1))])):(r(),f("div",Dt,k(i.value),1))]),_:2},1032,["props"]))),128)),e.authS.isAssistant?q("",!0):(r(),v(z,{key:0,"auto-width":""},{default:l(()=>[s(ze,{color:"primary",label:"Manage"},{default:l(()=>[s(Ue,null,{default:l(()=>[S((r(),v(Y,{clickable:"",to:"/rewatch-requests/"+a.row.id},{default:l(()=>[s(V,null,{default:l(()=>[s(C,null,{default:l(()=>[w("Show")]),_:1})]),_:1})]),_:2},1032,["to"])),[[D]]),S((r(),v(Y,{clickable:"",to:"/rewatch-requests/"+a.row.id+"/edit"},{default:l(()=>[s(V,null,{default:l(()=>[s(C,null,{default:l(()=>[w("Edit")]),_:1})]),_:1})]),_:2},1032,["to"])),[[D]]),a.row.status=="open"?S((r(),v(Y,{key:0,clickable:"",onClick:i=>e.deny(a.row)},{default:l(()=>[s(V,null,{default:l(()=>[s(C,null,{default:l(()=>[w("Deny")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[D]]):q("",!0),a.row.status=="open"?S((r(),v(Y,{key:1,clickable:"",onClick:i=>e.approve(a.row)},{default:l(()=>[s(V,null,{default:l(()=>[s(C,null,{default:l(()=>[w("Approve")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[D]]):q("",!0),S((r(),v(Y,{clickable:"",to:"/students/"+a.row.student.id},{default:l(()=>[s(V,null,{default:l(()=>[s(C,null,{default:l(()=>[w("Show Student")]),_:1})]),_:1})]),_:2},1032,["to"])),[[D]])]),_:2},1024)]),_:2},1024)]),_:2},1024))]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","pagination","visible-columns"])]))])}var Zt=pe(We,[["render",Ct],["__scopeId","data-v-f54f0da6"]]);export{Zt as default};
