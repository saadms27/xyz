import{k as Z,c as s,h as W,l as de,i as we,m as E,r as z,w as m,n as ge,p as He,g as pe,q as _e,u as Re,t as Ne,v as Ee,x as Ue,y as je,z as Ge,A as Ke,o as Je,B as ye,C as Q,D as be,E as Xe,_ as Se,G as k,H as w,Q as qe,I as Ye,d as Ze,J as G,K as l,j as o,L as C,M as $,N as O,O as D,P as et,R as tt,S as A}from"./index.7b556ff3.js";import{Q as at}from"./QSpace.db01d5c0.js";import{Q as lt}from"./QResizeObserver.e29eb32c.js";import{b as Y,a as ie,c as ot,s as nt,Q as T,d as v}from"./auth.7706eac0.js";import{Q as ut}from"./QList.5981651b.js";import{T as se}from"./TouchPan.d4ad0205.js";import{l as rt,Q as st,a as it}from"./login-form.3f1c4fa8.js";import{u as Be}from"./vue-i18n.d5518d49.js";import{w as dt}from"./working-component.b2f3abb0.js";import{a as ct}from"./axios.a02fe868.js";import"./index.8e8f3c06.js";import"./_commonjsHelpers.4e997714.js";import"./touch.3df10340.js";import"./selection.91c5c328.js";import"./QCircularProgress.2ad60061.js";var ft=Z({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:h}){const f=s(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>W("div",{class:f.value},de(h.default))}}),vt=Z({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:h}){const f=s(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>W("div",{class:f.value,role:"toolbar"},de(h.default))}}),mt=Z({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:h,emit:f}){const{proxy:{$q:S}}=pe(),r=we(_e,E);if(r===E)return console.error("QHeader needs to be child of QLayout"),E;const y=z(parseInt(e.heightHint,10)),d=z(!0),M=s(()=>e.reveal===!0||r.view.value.indexOf("H")!==-1||S.platform.is.ios&&r.isContainer.value===!0),x=s(()=>{if(e.modelValue!==!0)return 0;if(M.value===!0)return d.value===!0?y.value:0;const n=y.value-r.scroll.value.position;return n>0?n:0}),H=s(()=>e.modelValue!==!0||M.value===!0&&d.value!==!0),a=s(()=>e.modelValue===!0&&H.value===!0&&e.reveal===!0),L=s(()=>"q-header q-layout__section--marginal "+(M.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(H.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),g=s(()=>{const n=r.rows.value.top,B={};return n[0]==="l"&&r.left.space===!0&&(B[S.lang.rtl===!0?"right":"left"]=`${r.left.size}px`),n[2]==="r"&&r.right.space===!0&&(B[S.lang.rtl===!0?"left":"right"]=`${r.right.size}px`),B});function b(n,B){r.update("header",n,B)}function c(n,B){n.value!==B&&(n.value=B)}function F({height:n}){c(y,n),b("size",n)}function p(n){a.value===!0&&c(d,!0),f("focusin",n)}m(()=>e.modelValue,n=>{b("space",n),c(d,!0),r.animate()}),m(x,n=>{b("offset",n)}),m(()=>e.reveal,n=>{n===!1&&c(d,e.modelValue)}),m(d,n=>{r.animate(),f("reveal",n)}),m(r.scroll,n=>{e.reveal===!0&&c(d,n.direction==="up"||n.position<=e.revealOffset||n.position-n.inflectionPoint<100)});const i={};return r.instances.header=i,e.modelValue===!0&&b("size",y.value),b("space",e.modelValue),b("offset",x.value),ge(()=>{r.instances.header===i&&(r.instances.header=void 0,b("size",0),b("offset",0),b("space",!1))}),()=>{const n=He(h.default,[]);return e.elevated===!0&&n.push(W("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),n.push(W(lt,{debounce:0,onResize:F})),W("header",{class:L.value,style:g.value,onFocusin:p},n)}}});const ke=150;var ht=Z({name:"QDrawer",inheritAttrs:!1,props:{...Re,...Ne,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...Ee,"onLayout","miniState"],setup(e,{slots:h,emit:f,attrs:S}){const r=pe(),{proxy:{$q:y}}=r,d=Ue(e,y),{preventBodyScroll:M}=Xe(),{registerTimeout:x,removeTimeout:H}=je(),a=we(_e,E);if(a===E)return console.error("QDrawer needs to be child of QLayout"),E;let L,g=null,b;const c=z(e.behavior==="mobile"||e.behavior!=="desktop"&&a.totalWidth.value<=e.breakpoint),F=s(()=>e.mini===!0&&c.value!==!0),p=s(()=>F.value===!0?e.miniWidth:e.width),i=z(e.showIfAbove===!0&&c.value===!1?!0:e.modelValue===!0),n=s(()=>e.persistent!==!0&&(c.value===!0||Te.value===!0));function B(t,u){if(Ce(),t!==!1&&a.animate(),q(0),c.value===!0){const _=a.instances[J.value];_!==void 0&&_.belowBreakpoint===!0&&_.hide(!1),I(1),a.isContainer.value!==!0&&M(!0)}else I(0),t!==!1&&ne(!1);x(()=>{t!==!1&&ne(!0),u!==!0&&f("show",t)},ke)}function ce(t,u){$e(),t!==!1&&a.animate(),I(0),q(R.value*p.value),ue(),u!==!0?x(()=>{f("hide",t)},ke):H()}const{show:ee,hide:U}=Ge({showing:i,hideOnRouteChange:n,handleShow:B,handleHide:ce}),{addToHistory:Ce,removeFromHistory:$e}=Ke(i,U,n),K={belowBreakpoint:c,hide:U},V=s(()=>e.side==="right"),R=s(()=>(y.lang.rtl===!0?-1:1)*(V.value===!0?1:-1)),fe=z(0),N=z(!1),te=z(!1),ve=z(p.value*R.value),J=s(()=>V.value===!0?"left":"right"),ae=s(()=>i.value===!0&&c.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:p.value:0),le=s(()=>e.overlay===!0||e.miniToOverlay===!0||a.view.value.indexOf(V.value?"R":"L")!==-1||y.platform.is.ios===!0&&a.isContainer.value===!0),j=s(()=>e.overlay===!1&&i.value===!0&&c.value===!1),Te=s(()=>e.overlay===!0&&i.value===!0&&c.value===!1),Qe=s(()=>"fullscreen q-drawer__backdrop"+(i.value===!1&&N.value===!1?" hidden":"")),Le=s(()=>({backgroundColor:`rgba(0,0,0,${fe.value*.4})`})),me=s(()=>V.value===!0?a.rows.value.top[2]==="r":a.rows.value.top[0]==="l"),Oe=s(()=>V.value===!0?a.rows.value.bottom[2]==="r":a.rows.value.bottom[0]==="l"),De=s(()=>{const t={};return a.header.space===!0&&me.value===!1&&(le.value===!0?t.top=`${a.header.offset}px`:a.header.space===!0&&(t.top=`${a.header.size}px`)),a.footer.space===!0&&Oe.value===!1&&(le.value===!0?t.bottom=`${a.footer.offset}px`:a.footer.space===!0&&(t.bottom=`${a.footer.size}px`)),t}),Ae=s(()=>{const t={width:`${p.value}px`,transform:`translateX(${ve.value}px)`};return c.value===!0?t:Object.assign(t,De.value)}),Me=s(()=>"q-drawer__content fit "+(a.isContainer.value!==!0?"scroll":"overflow-auto")),Ve=s(()=>`q-drawer q-drawer--${e.side}`+(te.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(d.value===!0?" q-drawer--dark q-dark":"")+(N.value===!0?" no-transition":i.value===!0?"":" q-layout--prevent-focus")+(c.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${F.value===!0?"mini":"standard"}`+(le.value===!0||j.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(me.value===!0?" q-drawer--top-padding":""))),ze=s(()=>{const t=y.lang.rtl===!0?e.side:J.value;return[[se,xe,void 0,{[t]:!0,mouse:!0}]]}),We=s(()=>{const t=y.lang.rtl===!0?J.value:e.side;return[[se,he,void 0,{[t]:!0,mouse:!0}]]}),Ie=s(()=>{const t=y.lang.rtl===!0?J.value:e.side;return[[se,he,void 0,{[t]:!0,mouse:!0,mouseAllDir:!0}]]});function oe(){Fe(c,e.behavior==="mobile"||e.behavior!=="desktop"&&a.totalWidth.value<=e.breakpoint)}m(c,t=>{t===!0?(L=i.value,i.value===!0&&U(!1)):e.overlay===!1&&e.behavior!=="mobile"&&L!==!1&&(i.value===!0?(q(0),I(0),ue()):ee(!1))}),m(()=>e.side,(t,u)=>{a.instances[u]===K&&(a.instances[u]=void 0,a[u].space=!1,a[u].offset=0),a.instances[t]=K,a[t].size=p.value,a[t].space=j.value,a[t].offset=ae.value}),m(a.totalWidth,()=>{(a.isContainer.value===!0||document.qScrollPrevented!==!0)&&oe()}),m(()=>e.behavior+e.breakpoint,oe),m(a.isContainer,t=>{i.value===!0&&M(t!==!0),t===!0&&oe()}),m(a.scrollbarWidth,()=>{q(i.value===!0?0:void 0)}),m(ae,t=>{P("offset",t)}),m(j,t=>{f("onLayout",t),P("space",t)}),m(V,()=>{q()}),m(p,t=>{q(),re(e.miniToOverlay,t)}),m(()=>e.miniToOverlay,t=>{re(t,p.value)}),m(()=>y.lang.rtl,()=>{q()}),m(()=>e.mini,()=>{e.noMiniAnimation||e.modelValue===!0&&(Pe(),a.animate())}),m(F,t=>{f("miniState",t)});function q(t){t===void 0?ye(()=>{t=i.value===!0?0:p.value,q(R.value*t)}):(a.isContainer.value===!0&&V.value===!0&&(c.value===!0||Math.abs(t)===p.value)&&(t+=R.value*a.scrollbarWidth.value),ve.value=t)}function I(t){fe.value=t}function ne(t){const u=t===!0?"remove":a.isContainer.value!==!0?"add":"";u!==""&&document.body.classList[u]("q-body--drawer-toggle")}function Pe(){g!==null&&clearTimeout(g),r.proxy&&r.proxy.$el&&r.proxy.$el.classList.add("q-drawer--mini-animate"),te.value=!0,g=setTimeout(()=>{g=null,te.value=!1,r&&r.proxy&&r.proxy.$el&&r.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function xe(t){if(i.value!==!1)return;const u=p.value,_=Y(t.distance.x,0,u);if(t.isFinal===!0){_>=Math.min(75,u)===!0?ee():(a.animate(),I(0),q(R.value*u)),N.value=!1;return}q((y.lang.rtl===!0?V.value!==!0:V.value)?Math.max(u-_,0):Math.min(0,_-u)),I(Y(_/u,0,1)),t.isFirst===!0&&(N.value=!0)}function he(t){if(i.value!==!0)return;const u=p.value,_=t.direction===e.side,X=(y.lang.rtl===!0?_!==!0:_)?Y(t.distance.x,0,u):0;if(t.isFinal===!0){Math.abs(X)<Math.min(75,u)===!0?(a.animate(),I(1),q(0)):U(),N.value=!1;return}q(R.value*X),I(Y(1-X/u,0,1)),t.isFirst===!0&&(N.value=!0)}function ue(){M(!1),ne(!0)}function P(t,u){a.update(e.side,t,u)}function Fe(t,u){t.value!==u&&(t.value=u)}function re(t,u){P("size",t===!0?e.miniWidth:u)}return a.instances[e.side]=K,re(e.miniToOverlay,p.value),P("space",j.value),P("offset",ae.value),e.showIfAbove===!0&&e.modelValue!==!0&&i.value===!0&&e["onUpdate:modelValue"]!==void 0&&f("update:modelValue",!0),Je(()=>{f("onLayout",j.value),f("miniState",F.value),L=e.showIfAbove===!0;const t=()=>{(i.value===!0?B:ce)(!1,!0)};if(a.totalWidth.value!==0){ye(t);return}b=m(a.totalWidth,()=>{b(),b=void 0,i.value===!1&&e.showIfAbove===!0&&c.value===!1?ee(!1):t()})}),ge(()=>{b!==void 0&&b(),g!==null&&(clearTimeout(g),g=null),i.value===!0&&ue(),a.instances[e.side]===K&&(a.instances[e.side]=void 0,P("size",0),P("offset",0),P("space",!1))}),()=>{const t=[];c.value===!0&&(e.noSwipeOpen===!1&&t.push(Q(W("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),ze.value)),t.push(be("div",{ref:"backdrop",class:Qe.value,style:Le.value,"aria-hidden":"true",onClick:U},void 0,"backdrop",e.noSwipeBackdrop!==!0&&i.value===!0,()=>Ie.value)));const u=F.value===!0&&h.mini!==void 0,_=[W("div",{...S,key:""+u,class:[Me.value,S.class]},u===!0?h.mini():de(h.default))];return e.elevated===!0&&i.value===!0&&_.push(W("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push(be("aside",{ref:"content",class:Ve.value,style:Ae.value},_,"contentclose",e.noSwipeClose!==!0&&c.value===!0,()=>We.value)),W("div",{class:"q-drawer-container"},t)}}});const yt={name:"LogoutButton",setup(){const e=ie(),{locale:h,t:f}=Be({useScope:"global"});return{t:f,locale:h,auth:e}}};function bt(e,h,f,S,r,y){return k(),w(qe,{color:"negative",label:S.t("logout"),onClick:h[0]||(h[0]=d=>S.auth.logout()),class:"full-width"},null,8,["label"])}var kt=Se(yt,[["render",bt]]);const wt=Ye("network",{state:()=>({offline:!1})});const gt=Ze({name:"MainLayout",components:{logoutButton:kt,WorkingComponent:dt,LoginForm:rt},data(){const e=z(!1),h=ie(),{locale:f,t:S}=Be({useScope:"global"}),r=ot(),y=nt(),d=wt();return{locale:f,api:ct,t:S,authS:h,attendanceS:r,studentsS:y,networkS:d,leftDrawerOpen:e,toggleLeftDrawer(){e.value=!e.value}}},setup(){return{auth:ie()}}}),pt=tt("br",null,null,-1),_t={key:3};function St(e,h,f,S,r,y){const d=G("router-link"),M=G("logoutButton"),x=G("router-view"),H=G("WorkingComponent"),a=G("LoginForm");return k(),w(st,{dir:e.locale=="en-US"?"ltr":"rtl"},{default:l(()=>[e.authS.user!=null?(k(),w(mt,{key:0,elevated:"",dir:e.locale=="ar-EG"?"rtl":"ltr"},{default:l(()=>[o(vt,null,{default:l(()=>[o(qe,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),o(ft,null,{default:l(()=>[C("STDY Assistant App")]),_:1}),o(at)]),_:1})]),_:1},8,["dir"])):$("",!0),e.authS.user!=null?(k(),w(ht,{key:1,class:"notPrintable",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":h[0]||(h[0]=L=>e.leftDrawerOpen=L),"show-if-above":"",bordered:"",side:e.locale=="en-US"?"left":"right"},{default:l(()=>[o(ut,{class:"list"},{default:l(()=>{var L;return[pt,Q((k(),w(T,{active:"",clickable:""},{default:l(()=>[o(v,{avatar:""},{default:l(()=>[o(O,{name:"fa-solid fa-home"})]),_:1}),o(v,null,{default:l(()=>[o(d,{class:"router-link",to:"/",style:{"text-decoration":"none"},"active-class":"router-link"},{default:l(()=>[C(D(e.t("Home")),1)]),_:1})]),_:1})]),_:1})),[[A]]),e.studentsS.student!=null&&e.studentsS.student.id!=null?Q((k(),w(T,{key:0,active:"",clickable:""},{default:l(()=>[o(v,{avatar:""},{default:l(()=>[o(O,{name:"fa-solid fa-user-pen"})]),_:1}),o(v,null,{default:l(()=>{var g,b;return[o(d,{class:"router-link",to:"/students/"+((b=(g=e.studentsS.student)==null?void 0:g.id)!=null?b:-1)+"/edit",style:{"text-decoration":"none"}},{default:l(()=>[C(D(e.t("Edit Student")),1)]),_:1},8,["to"])]}),_:1})]),_:1})),[[A]]):$("",!0),e.auth.isSuperAssistant?Q((k(),w(T,{key:1,active:"",clickable:""},{default:l(()=>[o(v,{avatar:""},{default:l(()=>[o(O,{name:"fa-brands fa-youtube"})]),_:1}),o(v,null,{default:l(()=>[o(d,{class:"router-link",to:"/rewatch-requests",style:{"text-decoration":"none"}},{default:l(()=>[C(D(e.t("Requests")),1)]),_:1})]),_:1})]),_:1})),[[A]]):$("",!0),e.auth.isSuperAssistant?Q((k(),w(T,{key:2,active:"",clickable:""},{default:l(()=>[o(v,{avatar:""},{default:l(()=>[o(O,{name:"fa-solid fa-id-card-clip"})]),_:1}),o(v,null,{default:l(()=>[o(d,{class:"router-link",to:"/reports/attendance",style:{"text-decoration":"none"}},{default:l(()=>[C(D(e.t("Attendance Reports")),1)]),_:1})]),_:1})]),_:1})),[[A]]):$("",!0),e.auth.isSuperAssistant?Q((k(),w(T,{key:3,active:"",clickable:""},{default:l(()=>[o(v,{avatar:""},{default:l(()=>[o(O,{name:"fa-solid fa-money-bill-wave"})]),_:1}),o(v,null,{default:l(()=>[o(d,{class:"router-link",to:"/reports/fees",style:{"text-decoration":"none"}},{default:l(()=>[C(D(e.t("Fees Reports")),1)]),_:1})]),_:1})]),_:1})),[[A]]):$("",!0),e.auth.isSuperAssistant?Q((k(),w(T,{key:4,active:"",clickable:""},{default:l(()=>[o(v,{avatar:""},{default:l(()=>[o(O,{name:"fa-solid fa-users"})]),_:1}),o(v,null,{default:l(()=>[o(d,{class:"router-link",to:"/reports/students",style:{"text-decoration":"none"}},{default:l(()=>[C(D(e.t("Students Reports")),1)]),_:1})]),_:1})]),_:1})),[[A]]):$("",!0),e.auth.isSuperAssistant?Q((k(),w(T,{key:5,active:"",clickable:""},{default:l(()=>[o(v,{avatar:""},{default:l(()=>[o(O,{name:"fa-solid fa-list"})]),_:1}),o(v,null,{default:l(()=>[o(d,{class:"router-link",to:"/reports/attendance2",style:{"text-decoration":"none"}},{default:l(()=>[C(D(e.t("attendance reports2")),1)]),_:1})]),_:1})]),_:1})),[[A]]):$("",!0),e.auth.isSuperAssistant?Q((k(),w(T,{key:6,active:"",clickable:""},{default:l(()=>[o(v,{avatar:""},{default:l(()=>[o(O,{name:"fa-solid fa-circle-question"})]),_:1}),o(v,null,{default:l(()=>{var g;return[o(d,{class:"router-link",to:`courses/${(g=e.attendanceS.selectedCourse)==null?void 0:g.id}/exam-questions`,style:{"text-decoration":"none"}},{default:l(()=>[C(D(e.t("Questions Bank")),1)]),_:1},8,["to"])]}),_:1})]),_:1})),[[A]]):$("",!0),e.auth.isSuperAssistant?Q((k(),w(T,{key:7,active:"",clickable:""},{default:l(()=>[o(v,{avatar:""},{default:l(()=>[o(O,{name:"fa-solid fa-sack-dollar"})]),_:1}),o(v,null,{default:l(()=>[o(d,{class:"router-link",to:"/reports/income-report",style:{"text-decoration":"none"}},{default:l(()=>[C(D(e.t("Daily Income Report")),1)]),_:1})]),_:1})]),_:1})),[[A]]):$("",!0),((L=e.attendanceS.selectedCourse)==null?void 0:L.offline_homework_mode)==!0&&e.auth.isSuperAssistant?Q((k(),w(T,{key:8,active:"",clickable:""},{default:l(()=>[o(v,{avatar:""},{default:l(()=>[o(O,{name:"fa-solid fa-rectangle-list"})]),_:1}),o(v,null,{default:l(()=>[o(d,{class:"router-link",to:"/bulk_insert_homework_answers",style:{"text-decoration":"none"}},{default:l(()=>[C(D(e.t("bulk insert homework answers")),1)]),_:1})]),_:1})]),_:1})),[[A]]):$("",!0),o(T,null,{default:l(()=>[o(M)]),_:1})]}),_:1})]),_:1},8,["modelValue","side"])):$("",!0),e.authS.user!=null?(k(),w(it,{key:2,dir:e.locale=="ar-EG"?"rtl":"ltr"},{default:l(()=>[o(x)]),_:1},8,["dir"])):(k(),et("div",_t,[e.authS.working?(k(),w(H,{key:0})):(k(),w(a,{key:1}))]))]),_:1},8,["dir"])}var xt=Se(gt,[["render",St]]);export{xt as default};
