import{a as I,s as U,d as m,Q as k}from"./auth.fdd9f60a.js";import{d as P,_ as q,J as h,G as u,P as p,R as f,O as i,j as s,K as l,F as _,ad as F,H as r,L as S,Q as c,M as b,aa as v,bf as $,av as L}from"./index.ce7ea90d.js";import{Q as w}from"./QItemLabel.c0d04a15.js";import{Q as A}from"./QForm.5ac6f279.js";import{a as N,Q as M}from"./QTable.0202606a.js";import{Q as T}from"./QTr.64def1a2.js";import{Q as B}from"./QTd.4bd4834f.js";import{Q as R}from"./QBtnGroup.03e26965.js";import{u as G}from"./vue-i18n.9cee7702.js";import{E as j,C as H,S as J,t as K,a as O,b as z}from"./student-course-tab-view.d81f24f0.js";import{w as W}from"./working-component.b009b899.js";import"./axios.1ff92d29.js";import"./index.8e8f3c06.js";import"./_commonjsHelpers.4e997714.js";import"./QList.8b3bec6d.js";import"./QSelect.6c45d970.js";import"./QField.ebc53bc9.js";import"./selection.0b8105e5.js";import"./fees-printable.7b2d577e.js";import"./QSpace.28cd6bbf.js";import"./QImg.2b26ec98.js";import"./QTabPanels.d46b6fff.js";import"./QResizeObserver.c34b740c.js";import"./touch.3df10340.js";import"./use-render-cache.1a7235d4.js";import"./QCircularProgress.f0d12216.js";const X=P({name:"editStudentCourses",data(){const e=I(),o=U(),{locale:C,t:d}=G({useScope:"global"});return{t:d,locale:C,authS:e,studentsS:o,columns:[{label:d("Course"),name:"course",align:"left",sortable:!0,field:n=>{var y;return(y=n==null?void 0:n.course)==null?void 0:y.name}},{label:d("Group"),name:"group",align:"left",sortable:!0,field:n=>n==null?void 0:n.group},{label:d("Status"),name:"status",align:"left",sortable:!0,field:n=>n!=null&&n.active?d("Active"):d("Not Active")},{label:d("Fees"),name:"Fees",align:"left",sortable:!0,field:n=>n==null?void 0:n.fees},{label:d("Remaining Fees"),name:"remaining fees",align:"left",sortable:!0,field:n=>n==null?void 0:n.remaining_fees}],showSubscriptionDialog:!1,selectedCourse:null}},components:{EditSubscriptionDialog:j,CreateFeesTransaction:H}}),Y={key:3},Z={key:4};function x(e,o,C,d,n,y){var g;const V=h("EditSubscriptionDialog"),Q=h("CreateFeesTransaction");return u(),p("div",null,[f("h5",null,i(e.t("Courses")),1),s(M,{rows:(g=e.studentsS.student)==null?void 0:g.student_courses,columns:e.columns,loading:e.studentsS.working},{header:l(a=>[s(T,{props:a},{default:l(()=>[(u(!0),p(_,null,F(a.cols,t=>(u(),r(N,{key:t.name,props:a,class:"text-bold text-primary"},{default:l(()=>[S(i(t.label),1)]),_:2},1032,["props"]))),128)),s(N,{"auto-width":""})]),_:2},1032,["props"])]),body:l(a=>[e.authS.hasCourse(a.row.course.id)==!0?(u(),r(T,{key:0,props:a},{default:l(()=>[(u(!0),p(_,null,F(a.cols,t=>(u(),r(B,{key:t.name,props:a},{default:l(()=>[S(i(t.value),1)]),_:2},1032,["props"]))),128)),s(B,{"auto-width":""},{default:l(()=>[s(R,null,{default:l(()=>[e.studentsS.showEditSubscriptionDialog?b("",!0):(u(),r(c,{key:0,label:e.t("Edit"),color:"primary",onClick:t=>{e.studentsS.selectedSubscription=a.row,e.studentsS.showEditSubscriptionDialog=!0}},null,8,["label","onClick"])),s(c,{label:e.t("New Payment"),color:"primary",onClick:t=>{e.studentsS.selectedSubscription=a.row,e.studentsS.showCreateFeesDialog=!0}},null,8,["label","onClick"]),a.row.active?(u(),r(c,{key:1,label:e.t("deactivate"),color:"negative",onClick:t=>{e.studentsS.selectedSubscription=a.row,e.studentsS.deactivateConfirm()}},null,8,["label","onClick"])):(u(),r(c,{key:2,label:e.t("activate"),color:"primary",onClick:t=>{e.studentsS.selectedSubscription=a.row,e.studentsS.activateConfirm()}},null,8,["label","onClick"])),e.studentsS.selectedSubscription==a.row?(u(),p("div",Y,[s(V,{modelValue:e.studentsS.showEditSubscriptionDialog,"onUpdate:modelValue":o[0]||(o[0]=t=>e.studentsS.showEditSubscriptionDialog=t)},null,8,["modelValue"])])):b("",!0),e.studentsS.selectedSubscription==a.row?(u(),p("div",Z,[s(Q,{modelValue:e.studentsS.showCreateFeesDialog,"onUpdate:modelValue":o[1]||(o[1]=t=>e.studentsS.showCreateFeesDialog=t)},null,8,["modelValue"])])):b("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])):b("",!0)]),_:1},8,["rows","columns","loading"])])}var ee=q(X,[["render",x]]);const te=P({components:{editStudentCourses:ee,workingComponent:W,StudentCourseTabView:J},computed:{student(){return K(this.studentsS.student)}},methods:{to_course:O,to_student_course:z},data(){const{t:e}=G({useScope:"global"}),o=U();return{authS:I(),studentsS:o,t:e}},async mounted(){const e=this.$route.params.id;typeof e=="string"&&(await this.studentsS.getStudentById(parseInt(e)),this.studentsS.fillEditStudentFormFields())}}),se={key:1,class:"q-ma-md"},le={class:"q-mx-md text-h6"},ne=f("br",null,null,-1),oe=f("br",null,null,-1),ae=f("br",null,null,-1),ue={key:0};function de(e,o,C,d,n,y){var a;const V=h("workingComponent"),Q=h("editStudentCourses"),g=h("StudentCourseTabView");return e.studentsS.working?(u(),r(V,{key:0})):(u(),p("div",se,[f("div",le,i(e.t("Edit Student")),1),e.studentsS.student!=null?(u(),r(A,{key:0,class:"q-ma-md"},{default:l(()=>[s(k,{style:{width:"500px"}},{default:l(()=>[s(m,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[S(i(e.t("Mobile"))+":",1)]),_:1}),s(m,null,{default:l(()=>[s(w,{class:"text-black text-bold"},{default:l(()=>[s(v,{outlined:"",modelValue:e.studentsS.phoneNumber,"onUpdate:modelValue":o[0]||(o[0]=t=>e.studentsS.phoneNumber=t),dense:"",class:"full-width"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s(k,{style:{width:"500px"}},{default:l(()=>[s(m,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[S(i(e.t("Parent Phone Number"))+" :",1)]),_:1}),s(m,null,{default:l(()=>[s(w,{class:"text-black text-bold"},{default:l(()=>[s(v,{outlined:"",dense:"",class:"full-width",modelValue:e.studentsS.parentPhoneNumber,"onUpdate:modelValue":o[1]||(o[1]=t=>e.studentsS.parentPhoneNumber=t),placeholder:"parent phone number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s($,{inset:""}),s(k,{style:{width:"500px"}},{default:l(()=>[s(m,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[S(i(e.t("Name"))+":",1)]),_:1}),s(m,null,{default:l(()=>[s(w,{class:"text-black text-bold"},{default:l(()=>[s(v,{modelValue:e.studentsS.name,"onUpdate:modelValue":o[2]||(o[2]=t=>e.studentsS.name=t),outlined:"",dense:"",class:"full-width"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s($,{inset:""}),s(k,{style:{width:"500px"}},{default:l(()=>[s(m,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[S(i(e.t("Barcode"))+":",1)]),_:1}),s(m,null,{default:l(()=>[s(w,{class:"text-black text-bold"},{default:l(()=>[s(v,{modelValue:e.studentsS.barcode,"onUpdate:modelValue":o[3]||(o[3]=t=>e.studentsS.barcode=t),type:"number",outlined:"",dense:"",class:"full-width"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s($,{inset:""}),ne,s(c,{class:"full-width",label:e.t("save"),color:"primary",onClick:o[4]||(o[4]=t=>e.studentsS.confirmUpdateStudent())},null,8,["label"]),oe,ae,s(Q)]),_:1})):b("",!0),(u(!0),p(_,null,F((a=e.studentsS.student)==null?void 0:a.student_courses,t=>(u(),r(L,{key:t==null?void 0:t.id,class:"q-ma-md p-pa-md"},{default:l(()=>{var D,E;return[t!=null&&t.course!=null&&e.authS.hasCourse((D=t==null?void 0:t.course)==null?void 0:D.id)?(u(),p("div",ue,[f("h5",null,i((E=t==null?void 0:t.course)==null?void 0:E.name),1),s(g,{course:e.to_course(t==null?void 0:t.course),student:e.student,subscription:e.to_student_course(t)},null,8,["course","student","subscription"])])):b("",!0)]}),_:2},1024))),128))]))}var Ue=q(te,[["render",de]]);export{Ue as default};
