import{k as x,r as l,c as f,w,aH as b,h as k,g as _,aI as C,ae as Q,aJ as q,aK as E,W as K}from"./index.ce7ea90d.js";import{u as I,b as L,Q as M}from"./QSelect.6c45d970.js";var H=x({name:"QPopupProxy",props:{...I,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:o,emit:n,attrs:a}){const{proxy:r}=_(),{$q:d}=r,p=l(!1),s=l(null),h=f(()=>parseInt(e.breakpoint,10)),{canShow:g}=L({showing:p});function c(){return d.screen.width<h.value||d.screen.height<h.value?"dialog":"menu"}const u=l(c()),m=f(()=>u.value==="menu"?{maxHeight:"99vh"}:{});w(()=>c(),t=>{p.value!==!0&&(u.value=t)});function y(t){p.value=!0,n("show",t)}function P(t){p.value=!1,u.value=c(),n("hide",t)}return Object.assign(r,{show(t){g(t)===!0&&s.value.show(t)},hide(t){s.value.hide(t)},toggle(t){s.value.toggle(t)}}),b(r,"currentComponent",()=>({type:u.value,ref:s.value})),()=>{const t={ref:s,...m.value,...a,onShow:y,onHide:P};let i;return u.value==="dialog"?i=C:(i=M,Object.assign(t,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),k(i,t,o.default)}}});function v(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const o=parseInt(e,10);return isNaN(o)?0:o}var N=Q({name:"close-popup",beforeMount(e,{value:o}){const n={depth:v(o),handler(a){n.depth!==0&&setTimeout(()=>{const r=q(e);r!==void 0&&E(r,a,n.depth)})},handlerKey(a){K(a,13)===!0&&n.handler(a)}};e.__qclosepopup=n,e.addEventListener("click",n.handler),e.addEventListener("keyup",n.handlerKey)},updated(e,{value:o,oldValue:n}){o!==n&&(e.__qclosepopup.depth=v(o))},beforeUnmount(e){const o=e.__qclosepopup;e.removeEventListener("click",o.handler),e.removeEventListener("keyup",o.handlerKey),delete e.__qclosepopup}});export{N as C,H as Q};
